<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0108)https://dazzling-northcutt-482b45.netlify.com/notes/courseware/week2/shopping/shopping.html#/sec-title-slide -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" class="gr__dazzling-northcutt-482b45_netlify_com"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- 2019-01-28 Mon 18:12 -->

<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Powercoders Basel Coursework, DOM Shopping List Exercise</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Nik Clayton">
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="./JavaScript_files/html-export.css">
<link rel="stylesheet" type="text/css" href="./JavaScript_files/html-export(1).css">
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body data-gr-c-s-loaded="true" cz-shortcut-listen="true">
<div id="content">
<h1 class="title">Powercoders Basel Coursework, DOM Shopping List Exercise</h1>

<div id="outline-container-orgdcd11b1" class="outline-2">
<h2 id="orgdcd11b1"><span class="section-number-2">1</span> Building a shopping list</h2>
<div class="outline-text-2" id="text-1">
<div class="NOTES">
<p>
So far everything that we've been learning has been a bit abstract.
</p>

<p>
That's OK, but it's time to put the pieces together and start
building something more concrete, where we can see definite
progress towards an end-goal.
</p>

<p>
So we're going to build a web based shopping list, bit by bit.
</p>

<p>
Along the way we'll discover new things that we need to learn,
and incorporate that in to what we build.
</p>

</div>
</div>
</div>

<div id="outline-container-org0d946e3" class="outline-2">
<h2 id="org0d946e3"><span class="section-number-2">2</span> Features</h2>
<div class="outline-text-2" id="text-2">
<ul class="org-ul">
<li>Box to enter an item</li>
<li>Button to add the item to a list</li>
<li>The list itself</li>
<li>Each list item has a button to delete the item</li>
</ul>

<div class="NOTES">
<p>
To start with, our app is going to be very simple.
</p>

<p>
It's going to need a box where the user can type in the name of
the item they want to add to the list. Add a button that the
user can click in order to add the thing to the list.
</p>

<p>
It's going to need to be able to show the list of things the user
has entered.
</p>

<p>
And each list item is going to need a button that allows the user
to delete the thing from the list.
</p>

<p>
At the moment we're not going to worry too much about how it
looks, so we're going to keep styling to a minimum. We want to
get the core functionality working properly first.
</p>

</div>
</div>
</div>

<div id="outline-container-orgf8c22aa" class="outline-2">
<h2 id="orgf8c22aa"><span class="section-number-2">3</span> Goal</h2>
<div class="outline-text-2" id="text-3">
<div class="org-center">

<div class="figure">
<p><img src="./JavaScript_files/initial-wireframe.png" alt="initial-wireframe.png">
</p>
</div>
</div>

<div class="NOTES">
<p>
I used a sketch tool to throw together a quick wireframe of what
the app would look like initially, to make it a bit more concrete.
</p>

<p>
This is a very common approach – the UI designer might come to you
with some sketches of different ideas, asking how difficult it is to
build their idea.
</p>

<p>
[Wireframe is: <a href="https://wireframe.cc/Lfqgye">https://wireframe.cc/Lfqgye</a>]
</p>

</div>
</div>
</div>
<div id="outline-container-orgd01e88f" class="outline-2">
<h2 id="orgd01e88f"><span class="section-number-2">4</span> What do / don't we know?</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li>We know
<ul class="org-ul">
<li>Paragraphs, lists</li>
<li>Listening for clicks</li>
<li>Adding DOM nodes</li>
</ul></li>
</ul>
<div class="NOTES">
<p>
Here's the things we've already covered. From that little demo,
who can tell me things we're going to need to learn?
</p>

</div>
</div>
</div>

<div id="outline-container-orgc0e948a" class="outline-2">
<h2 id="orgc0e948a"><span class="section-number-2">5</span> What do / don't we know?</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li>We know
<ul class="org-ul">
<li>Paragraphs, lists</li>
<li>Listening for clicks</li>
<li>Adding DOM nodes</li>
</ul></li>
</ul>
<ul class="org-ul">
<li>We don't know
<ul class="org-ul">
<li>Input boxes</li>
<li>Buttons</li>
<li>Removing DOM nodes</li>
</ul></li>
</ul>
<div class="NOTES">
<p>
I think we're going to need to figure out
</p>

<ul class="org-ul">
<li>input boxes</li>
<li>buttons</li>
<li>removing DOM nodes (so we can delete items from the list)</li>
</ul>

<p>
Everything else is stuff we've already done.
</p>

</div>
</div>
</div>

<div id="outline-container-org62ce103" class="outline-2">
<h2 id="org62ce103"><span class="section-number-2">6</span> Set up</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li>Create a <code>poco/shopping</code> directory</li>
<li>Create <code>index.html</code>
<ul class="org-ul">
<li>Heading "My shopping list"</li>
<li>Empty unordered list</li>
</ul></li>
<li>Link to empty <code>style.css</code> and <code>shopping.js</code> files</li>
</ul>

<div class="NOTES">
<p>
We'll set up the infrastructure for our project.
</p>

<p>
Create a new directory in your <code>poco</code> directory called <code>shopping</code>.
</p>

<p>
In there, create an <code>index.html</code> file. It should have a level 1 heading
with the text <code>My shopping list</code>, and an empty unordered list – the <code>ul</code>
element should be there, but it shouldn't have an listitems.
</p>

<p>
Make sure this HTML file links to two empty files, <code>style.css</code> and
<code>shopping.hs</code>.
</p>

</div>
</div>
</div>

<div id="outline-container-orgdbbec5d" class="outline-2">
<h2 id="orgdbbec5d"><span class="section-number-2">7</span> Set up HTML</h2>
<div class="outline-text-2" id="text-7">
<div class="org-src-container">
<pre class="src src-html"><code><span style="color: #CC9393;">&lt;!DOCTYPE html&gt;</span></code>
<code>&lt;<span style="color: #93E0E3;">html</span>&gt;</code>
<code>  &lt;<span style="color: #93E0E3;">head</span>&gt;</code>
<code>    &lt;<span style="color: #93E0E3;">title</span>&gt;<span style="font-weight: bold;">Shopping</span>&lt;/<span style="color: #93E0E3;">title</span>&gt;</code>
<code>    &lt;<span style="color: #93E0E3;">link</span> <span style="color: #DFAF8F;">rel</span>=<span style="color: #CC9393;">"stylesheet"</span> <span style="color: #DFAF8F;">href</span>=<span style="color: #CC9393;">"style.css"</span> <span style="color: #DFAF8F;">type</span>=<span style="color: #CC9393;">"text/css"</span>&gt;</code>
<code>    &lt;<span style="color: #93E0E3;">script</span> <span style="color: #DFAF8F;">src</span>=<span style="color: #CC9393;">"shopping.js"</span>&gt;&lt;/<span style="color: #93E0E3;">script</span>&gt;</code>
<code>  &lt;/<span style="color: #93E0E3;">head</span>&gt;</code>
<code></code>
<code>  &lt;<span style="color: #93E0E3;">body</span>&gt;</code>
<code>    &lt;<span style="color: #93E0E3;">h1</span>&gt;<span style="font-weight: bold;">My shopping list</span>&lt;/<span style="color: #93E0E3;">h1</span>&gt;</code>
<code></code>
<code>    <span style="color: #5F7F5F;">&lt;!-- </span><span style="color: #7F9F7F;">Controls to append new items go here </span><span style="color: #5F7F5F;">--&gt;</span></code>
<code></code>
<code>    <span style="color: #5F7F5F;">&lt;!-- </span><span style="color: #7F9F7F;">This is the shopping list </span><span style="color: #5F7F5F;">--&gt;</span></code>
<code>    &lt;<span style="color: #93E0E3;">ul</span>&gt;</code>
<code>      <span style="color: #5F7F5F;">&lt;!-- </span><span style="color: #7F9F7F;">List items will be added and removed here :-) </span><span style="color: #5F7F5F;">--&gt;</span></code>
<code>    &lt;/<span style="color: #93E0E3;">ul</span>&gt;</code>
<code>  &lt;/<span style="color: #93E0E3;">body</span>&gt;</code>
<code>&lt;/<span style="color: #93E0E3;">html</span>&gt;</code>
</pre>
</div>

<div class="NOTES">
<p>
Put this text in your HTML file, and make sure it works.
</p>

<p>
There's nothing special about this – it's just a skeleton file
that contains all the normal structure for an HTML page.
</p>

<p>
I've added comments that indicate where the things we're going
to need to learn are going to go, and we'll fill these in through
the class.
</p>

<p>
Add all of these files to your repository and make a commit
with a sensible commit message.
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>

<div id="outline-container-org0c84455" class="outline-2">
<h2 id="org0c84455"><span class="section-number-2">8</span> Input boxes</h2>
<div class="outline-text-2" id="text-8">
<ul class="org-ul">
<li>MDN documentation: [<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/text">mdn html input type=text</a>]</li>
<li>Questions:
<ul class="org-ul">
<li>What element name and attributes should we use?</li>
<li>What property contains the typed in value?</li>
<li>How do you set a placeholder value?</li>
<li>What is the <code>label</code> element used for?</li>
</ul></li>
</ul>

<div class="NOTES">
<p>
We're going to start by focusing on the UI things that we don't know.
</p>

<p>
To do that, I want you to look at the Mozilla Developer Network
pages for <code>html input</code> element. Specifically, the one where the
<code>type</code> attribute is set to <code>text</code>.
</p>

<p>
Have a read through that page and keep these questions in mind as
you're reading, as I'll be asking questions in about 10 minutes…
</p>

<p>
[Wait]
</p>

</div>
</div>

<div id="outline-container-orge92c3aa" class="outline-3">
<h3 id="orge92c3aa"><span class="section-number-3">8.1</span> Answers</h3>
<div class="outline-text-3" id="text-8-1">
</div>
<div id="outline-container-orga04a3cb" class="outline-4">
<h4 id="orga04a3cb"><span class="section-number-4">8.1.1</span> What element name should be used?</h4>
<div class="outline-text-4" id="text-8-1-1">
<div class="org-src-container">
<pre class="src src-html-chrome" id="org0796dd5"><code>&lt;<span style="color: #93E0E3;">input</span> <span style="color: #DFAF8F;">type</span>=<span style="color: #CC9393;">"text"</span>&gt;</code>
</pre>
</div>

<ul class="org-ul">
<li>The <code>input</code> element</li>
<li>Specialised based on <code>type</code> attribute
<ul class="org-ul">
<li><code>text</code>, <code>color</code>, <code>password</code>, …</li>
</ul></li>
</ul>

<div class="figure">
<p><img src="./JavaScript_files/input-example.png" alt="input-example.png">
</p>
</div>

<div class="NOTES">
<p>
We use the <code>input</code> element, generally, to get input from the
user.
</p>

<p>
This element has a <code>type</code> attribute that is used to say exactly
what form the input should take. When we want to get a line of
text we set the <code>type</code> attribute to <code>text</code>, but there are others.
</p>

<p>
For example, if we set <code>type</code> to password then the text the user
typed in would automatically be hidden.
</p>

</div>
</div>
</div>

<div id="outline-container-org5630202" class="outline-4">
<h4 id="org5630202"><span class="section-number-4">8.1.2</span> What property contains the typed in value?</h4>
<div class="outline-text-4" id="text-8-1-2">
<div class="org-src-container">
<pre class="src src-html"><code>&lt;<span style="color: #93E0E3;">input</span> <span style="color: #DFAF8F;">type</span>=<span style="color: #CC9393;">"text"</span> <span style="color: #DFAF8F;">id</span>=<span style="color: #CC9393;">"an-input"</span>&gt;</code>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">el</span> = document.getElementById(<span style="color: #CC9393;">"an-input"</span>);</code>
<code>el.value;</code>
</pre>
</div>

<div class="NOTES">
<p>
The <code>input</code> element has a property called <code>value</code>. This property
contains whatever text is in the element.
</p>

</div>
</div>
</div>

<div id="outline-container-org45359e7" class="outline-4">
<h4 id="org45359e7"><span class="section-number-4">8.1.3</span> How do you set a placeholder value?</h4>
<div class="outline-text-4" id="text-8-1-3">
<div class="org-src-container">
<pre class="src src-html-chrome" id="org97a8d00"><code>&lt;<span style="color: #93E0E3;">input</span> <span style="color: #DFAF8F;">type</span>=<span style="color: #CC9393;">"text"</span> <span style="color: #DFAF8F;">placeholder</span>=<span style="color: #CC9393;">"Enter item"</span>&gt;</code>
</pre>
</div>

<ul class="org-ul">
<li>Use the <code>placeholder</code> attribute</li>
</ul>

<div class="figure">
<p><img src="./JavaScript_files/input-placeholder-example.png" alt="input-placeholder-example.png">
</p>
</div>
<div class="NOTES">
<p>
Simply enough – there is a <code>placeholder</code> attribute. It's
value is used as the text to display in the input box if
the user hasn't entered anything.
</p>

</div>
</div>
</div>

<div id="outline-container-org4560b5a" class="outline-4">
<h4 id="org4560b5a"><span class="section-number-4">8.1.4</span> What is the <code>label</code> element used for?</h4>
<div class="outline-text-4" id="text-8-1-4">
<div class="org-src-container">
<pre class="src src-html-chrome" id="orged47bfc"><code>&lt;<span style="color: #93E0E3;">label</span> <span style="color: #DFAF8F;">for</span>=<span style="color: #CC9393;">"item"</span>&gt;Enter a new item:&lt;/<span style="color: #93E0E3;">label</span>&gt;</code>
<code>&lt;<span style="color: #93E0E3;">input</span> <span style="color: #DFAF8F;">type</span>=<span style="color: #CC9393;">"text"</span> <span style="color: #DFAF8F;">id</span>=<span style="color: #CC9393;">"item"</span> <span style="color: #DFAF8F;">placeholder</span>=<span style="color: #CC9393;">"Enter item"</span>&gt;</code>
</pre>
</div>

<ul class="org-ul">
<li>Associates a caption with the input
<ul class="org-ul">
<li>Clicking the label selects the input</li>
<li>Screenreaders and accessibility</li>
</ul></li>
<li><code>label</code> <code>for</code> attribute points to <code>input</code> <code>id</code> attribute</li>
</ul>

<div class="figure">
<p><img src="./JavaScript_files/input-label-example.png" alt="input-label-example.png">
</p>
</div>
<div class="NOTES">
<p>
The <code>label</code> element lets us associated a label with this specific
input element.
</p>

<p>
We could have used a <code>p</code>, but the <code>label</code> has a special attribute
that allows us to say exactly which input element the label is for.
</p>

<p>
If our input element has an <code>id</code> attribute, we set the label's
<code>for</code> attribute to the same value. Now, if the user clicks the
label the cursor will move in to the input element. And if they
have accessibility issues – maybe they're using a screenreader –
then their tools will be able do a better job.
</p>

</div>
</div>
</div>
</div>

<div id="outline-container-orge05397b" class="outline-3">
<h3 id="orge05397b"><span class="section-number-3">8.2</span> Add <code>label</code> and <code>input</code> elements</h3>
<div class="outline-text-3" id="text-8-2">
<div class="org-src-container">
<pre class="src src-html"><span class="linenr">11: </span><code><span style="color: #5F7F5F;">&lt;!-- </span><span style="color: #7F9F7F;">Controls to append new items go here </span><span style="color: #5F7F5F;">--&gt;</span></code>
<span class="linenr">12: </span><code>&lt;<span style="color: #93E0E3;">div</span>&gt;</code>
<span class="linenr">13: </span><code>  &lt;<span style="color: #93E0E3;">label</span> <span style="color: #DFAF8F;">for</span>=<span style="color: #CC9393;">"item"</span>&gt;Enter a new item:&lt;/<span style="color: #93E0E3;">label</span>&gt;</code>
<span class="linenr">14: </span><code>  &lt;<span style="color: #93E0E3;">input</span> <span style="color: #DFAF8F;">type</span>=<span style="color: #CC9393;">"text"</span> <span style="color: #DFAF8F;">id</span>=<span style="color: #CC9393;">"item"</span></code>
<span class="linenr">15: </span><code>    <span style="color: #DFAF8F;">placeholder</span>=<span style="color: #CC9393;">"Type something to buy"</span>&gt;</code>
<span class="linenr">16: </span><code>&lt;/<span style="color: #93E0E3;">div</span>&gt;</code>
</pre>
</div>

<ul class="org-ul">
<li>Edit <code>index.html</code></li>
<li>Add these elements to the page</li>
<li>Don't forget to add and commit</li>
</ul>

<div class="figure">
<p><img src="./JavaScript_files/add-label-and-input-elements.png" alt="add-label-and-input-elements.png">
</p>
</div>

<div class="NOTES">
<p>
So, now that we know all of that you can go ahead and add these
elements to your page. Here's the HTML to use, just as a
reminder.
</p>

<p>
When it's working don't forget to add and commit the change.
</p>

</div>
</div>
</div>
<div id="outline-container-orgbc987ee" class="outline-3">
<h3 id="orgbc987ee"><span class="section-number-3">8.3</span> Checking that we can read the value</h3>
<div class="outline-text-3" id="text-8-3">
<ul class="org-ul">
<li>Type something in the box</li>
</ul>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">el</span> = document.getElementById(<span style="color: #CC9393;">'item'</span>);</code>
<code>el.value;</code>
</pre>
</div>

<ul class="org-ul">
<li>Do you see what you typed?</li>
</ul>

<div class="NOTES">
<p>
We already saw that the input widget has a <code>value</code> property that
contains whatever is entered in to the box.
</p>

<p>
We're going to need this information later.
</p>

<p>
So lets make sure that our understanding is correct.
</p>

<p>
Load the page in your browser, and open the developer tools.
</p>

<p>
Then type something – it doesn't matter what – in to input
box.
</p>

<p>
Then, in the console, type this Javascript. All this does is
find the <code>input</code> element in the page and display its <code>value</code>
property.
</p>

<p>
If everything's working then you should see what you typed in
to the box in the console.
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>
<div id="outline-container-orgea75463" class="outline-3">
<h3 id="orgea75463"><span class="section-number-3">8.4</span> Can we write the value?</h3>
<div class="outline-text-3" id="text-8-4">
<div class="org-src-container">
<pre class="src src-javascript"><code>el.value = <span style="color: #CC9393;">'hello'</span>;  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">&lt;-- What happens?</span></code>
</pre>
</div>

<div class="NOTES">
<p>
Try this out in the console. What happens?
</p>

<p>
[Wait]
</p>

<p>
That's cool – we can change the value in the box by writing
to the property.
</p>

<p>
This is just like changing the value of the <code>className</code> property
to change the <code>class</code> attribute value that we did earlier.
</p>

</div>
</div>
</div>
</div>

<div id="outline-container-org64190d1" class="outline-2">
<h2 id="org64190d1"><span class="section-number-2">9</span> Buttons</h2>
<div class="outline-text-2" id="text-9">
<ul class="org-ul">
<li>MDN documentation: [<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button">mdn html button</a>]</li>
<li>Questions:
<ul class="org-ul">
<li>What element name and attributes should we use?</li>
<li>Can we make buttons look pretty?</li>
</ul></li>
</ul>

<div class="NOTES">
<p>
Now we know how to provide somewhere for the user to enter
information we need to give them a button that they can click
which will add the entered item to the shopping list.
</p>

<p>
Again, I want you to look at the MDN pages for buttons. Do that
search, and read the page keeping these questions in mind. I'll
be asking questions again in about 10 minutes…
</p>

<p>
[Wait]
</p>

</div>
</div>

<div id="outline-container-orge998c85" class="outline-3">
<h3 id="orge998c85"><span class="section-number-3">9.1</span> Answers</h3>
<div class="outline-text-3" id="text-9-1">
</div>
<div id="outline-container-org0feac92" class="outline-4">
<h4 id="org0feac92"><span class="section-number-4">9.1.1</span> What element name should be used?</h4>
<div class="outline-text-4" id="text-9-1-1">
<div class="org-src-container">
<pre class="src src-html-chrome" id="org43a5acc"><code>&lt;<span style="color: #93E0E3;">button</span>&gt;Click me!&lt;/<span style="color: #93E0E3;">button</span>&gt;</code>
</pre>
</div>

<ul class="org-ul">
<li>The <code>button</code> element</li>
<li>At the moment we don't need attributes</li>
</ul>

<div class="figure">
<p><img src="./JavaScript_files/button-example.png" alt="button-example.png">
</p>
</div>

<div class="NOTES">
<p>
Creating buttons is pretty easy. We just use the <code>button</code> element,
without any special attributes.
</p>

<p>
The content of the element becomes the text shown on the button.
</p>

</div>
</div>
</div>

<div id="outline-container-orgc4648b5" class="outline-4">
<h4 id="orgc4648b5"><span class="section-number-4">9.1.2</span> Can we make the buttons look pretty?</h4>
<div class="outline-text-4" id="text-9-1-2">
<div class="org-src-container">
<pre class="src src-html-chrome" id="orge7ffdd2"><code>&lt;<span style="color: #93E0E3;">button</span></code>
<code>  <span style="color: #DFAF8F;">style</span>=<span style="color: #CC9393;">"</span></code>
<code><span style="color: #CC9393;">    border: 0;</span></code>
<code><span style="color: #CC9393;">    line-height: 2.5;</span></code>
<code><span style="color: #CC9393;">    padding: 0 20px;</span></code>
<code><span style="color: #CC9393;">    font-size: 1rem;</span></code>
<code><span style="color: #CC9393;">    text-align: center;</span></code>
<code><span style="color: #CC9393;">    color: #fff;</span></code>
<code><span style="color: #CC9393;">    text-shadow: 1px 1px 1px #000;</span></code>
<code><span style="color: #CC9393;">    border-radius: 10px;</span></code>
<code><span style="color: #CC9393;">    background-color: rgba(220, 0, 0, 1);</span></code>
<code><span style="color: #CC9393;">    background-image: linear-gradient(to top left,</span></code>
<code><span style="color: #CC9393;">                                      rgba(0, 0, 0, .2),</span></code>
<code><span style="color: #CC9393;">                                      rgba(0, 0, 0, .2) 30%,</span></code>
<code><span style="color: #CC9393;">                                      rgba(0, 0, 0, 0));</span></code>
<code><span style="color: #CC9393;">    box-shadow: inset 2px 2px 3px rgba(255, 255, 255, .6),</span></code>
<code><span style="color: #CC9393;">                inset -2px -2px 3px rgba(0, 0, 0, .6);</span></code>
<code><span style="color: #CC9393;">    text-shadow: 1px 1px 1px #000;"</span>&gt;Click me!&lt;/<span style="color: #93E0E3;">button</span>&gt;</code>
</pre>
</div>

<ul class="org-ul">
<li><code>style</code> attribute is only for demo purposes, do not do this</li>
</ul>

<div class="figure">
<p><img src="./JavaScript_files/button-style-example.png" alt="button-style-example.png">
</p>
</div>

<div class="NOTES">
<p>
Yes we can. There are lots of opportunities for styling buttons.
</p>

<p>
This is a somewhat extreme example.
</p>

</div>
</div>
</div>
</div>

<div id="outline-container-org442875a" class="outline-3">
<h3 id="org442875a"><span class="section-number-3">9.2</span> Add a <code>button</code> element to your page</h3>
<div class="outline-text-3" id="text-9-2">
<ul class="org-ul">
<li>Add a <code>button</code> element after the <code>input</code> element
<ul class="org-ul">
<li>Inside the <code>div</code></li>
</ul></li>
<li>Make sure it shows up</li>
<li>Add and commit</li>
</ul>

<div class="NOTES">
<p>
So lets add that <code>button</code> element to the page. Place it after
the <code>input</code> element, and inside the <code>div</code>.
</p>

<p>
The text on the button can be anything you want.
</p>

<p>
Once you've done that and it's showing up, add and commit.
</p>

<p>
[Wait]
</p>

</div>
</div>

<div id="outline-container-org888a1ff" class="outline-4">
<h4 id="org888a1ff"><span class="section-number-4">9.2.1</span> Solution: Add a <code>button</code> element</h4>
<div class="outline-text-4" id="text-9-2-1">
<div class="org-src-container">
<pre class="src src-html"><span class="linenr">11: </span><code><span style="color: #5F7F5F;">&lt;!-- </span><span style="color: #7F9F7F;">Controls to append new items go here </span><span style="color: #5F7F5F;">--&gt;</span></code>
<span class="linenr">12: </span><code>&lt;<span style="color: #93E0E3;">div</span>&gt;</code>
<span class="linenr">13: </span><code>  &lt;<span style="color: #93E0E3;">label</span> <span style="color: #DFAF8F;">for</span>=<span style="color: #CC9393;">"item"</span>&gt;Enter a new item:&lt;/<span style="color: #93E0E3;">label</span>&gt;</code>
<span class="linenr">14: </span><code>  &lt;<span style="color: #93E0E3;">input</span> <span style="color: #DFAF8F;">type</span>=<span style="color: #CC9393;">"text"</span> <span style="color: #DFAF8F;">id</span>=<span style="color: #CC9393;">"item"</span></code>
<span class="linenr">15: </span><code>    <span style="color: #DFAF8F;">placeholder</span>=<span style="color: #CC9393;">"Type something to buy"</span>&gt;</code>
<span class="linenr">16: </span><code>  &lt;<span style="color: #93E0E3;">button</span>&gt;Add item&lt;/<span style="color: #93E0E3;">button</span>&gt;</code>
<span class="linenr">17: </span><code>&lt;/<span style="color: #93E0E3;">div</span>&gt;</code>
</pre>
</div>

<div class="figure">
<p><img src="./JavaScript_files/solution-add-a-button-element.png" alt="solution-add-a-button-element.png">
</p>
</div>

<div class="NOTES">
<p>
So lets add that <code>button</code> element to the page. Place it after
the <code>input</code> element, and inside the <code>div</code>.
</p>

<p>
The text on the button can be anything you want.
</p>

<p>
Once you've done that and it's showing up, add and commit.
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org85c9448" class="outline-2">
<h2 id="org85c9448"><span class="section-number-2">10</span> Widgets / controls</h2>
<div class="outline-text-2" id="text-10">
<div class="NOTES">
<p>
The general term for things like the input box, buttons, and
other things that you can add to forms – like checkboxes, drop-down
lists, radio buttons, and more – is a <b>widget</b>. The term <b>control</b>
is also used.
</p>

<p>
So you might hear me talk about the <b>input widget</b> or the <b>input
control</b>, or the <b>button widget</b>.
</p>

<p>
You'll see these terms come up a lot in documentation as well.
</p>

</div>
</div>
</div>

<div id="outline-container-org019a76a" class="outline-2">
<h2 id="org019a76a"><span class="section-number-2">11</span> Responding to button clicks</h2>
<div class="outline-text-2" id="text-11">
<ul class="org-ul">
<li>Use an event listener, exactly as before</li>
</ul>

<div class="org-src-container">
<pre class="src src-javascript"><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>      console.log(<span style="color: #CC9393;">'The button was clicked'</span>);</code>
<code>  });</code>
<code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
Our button is on the page, but it's not doing anything yet.
</p>

<p>
We need to write some Javascript that will run when the button is
clicked that will do something.
</p>

<p>
To listen for button clicks we use an event listener exactly as we've
done in the past.
</p>

<p>
I know <code>querySelector</code> here is new. We're going to talk about that
in a moment.
</p>

<p>
For now, make sure that <code>index.html</code> is loaded, open the console,
type this, and click the button a few times to make sure it works.
</p>

<p>
[Wait]
</p>

<p>
Does everyone see how this works? Did you get the message in the
console when the button was clicked?
</p>

</div>
</div>

<div id="outline-container-orge6d5f99" class="outline-4">
<h4 id="orge6d5f99"><span class="section-number-4">11.0.1</span> <code>querySelector()</code></h4>
<div class="outline-text-4" id="text-11-0-1">
<div class="org-src-container">
<pre class="src src-javascript"><code>document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    console.log(<span style="color: #CC9393;">'The button was clicked'</span>);</code>
<code>});</code>
</pre>
</div>

<ul class="org-ul">
<li>Finds the <b>first</b> element that matches the CSS selector string</li>
<li>Much more flexible than <code>getElementById()</code></li>
</ul>

<div class="NOTES">
<p>
So far we've been using <code>getElementById</code> to find elements based on their
<code>id</code> attribute.
</p>

<p>
Here I'm using the <code>querySelector</code> method. This method has a single
parameter which is a string which should look like a CSS selector.
</p>

<p>
Remember, the selector is the part in a CSS rule that's <b>before</b> the
curly-brackets and all the style rules.
</p>

<p>
If more than one element matches the selector only the first matching
element is returned.
</p>

</div>
</div>
</div>

<div id="outline-container-org1d18e90" class="outline-4">
<h4 id="org1d18e90"><span class="section-number-4">11.0.2</span> <code>querySelector()</code> examples</h4>
<div class="outline-text-4" id="text-11-0-2">
<div class="org-src-container">
<pre class="src src-html"><code>&lt;<span style="color: #93E0E3;">p</span> <span style="color: #DFAF8F;">id</span>=<span style="color: #CC9393;">"first"</span>&gt;...&lt;/<span style="color: #93E0E3;">p</span>&gt;</code>
<code></code>
<code>&lt;<span style="color: #93E0E3;">h1</span> <span style="color: #DFAF8F;">class</span>=<span style="color: #CC9393;">"warning"</span>&gt;<span style="font-weight: bold;">...</span>&lt;/<span style="color: #93E0E3;">h1</span>&gt;</code>
<code></code>
<code>&lt;<span style="color: #93E0E3;">p</span> <span style="color: #DFAF8F;">class</span>=<span style="color: #CC9393;">"warning"</span>&gt;...&lt;/<span style="color: #93E0E3;">p</span>&gt;</code>
<code></code>
<code>&lt;<span style="color: #93E0E3;">ul</span>&gt;</code>
<code>  &lt;<span style="color: #93E0E3;">li</span>&gt;First li&lt;/<span style="color: #93E0E3;">li</span>&gt;</code>
<code>  &lt;<span style="color: #93E0E3;">li</span>&gt;Second li&lt;/<span style="color: #93E0E3;">li</span>&gt;</code>
<code>&lt;/<span style="color: #93E0E3;">li</span>&gt;</code>
</pre>
</div>
<div class="org-src-container">
<pre class="src src-javascript"><code>document.querySelector(<span style="color: #CC9393;">'#first'</span>);</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">&lt;p id="first"&gt;</span></code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Identical to getElementById('first');</span></code>
<code></code>
<code>document.querySelector(<span style="color: #CC9393;">'.warning'</span>);</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">&lt;h1 class="warning"&gt;</span></code>
<code></code>
<code>document.querySelector(<span style="color: #CC9393;">'p.warning'</span>);</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">&lt;p class="warning"&gt;</span></code>
<code></code>
<code>document.querySelector(<span style="color: #CC9393;">'ul li:nth-of-type(2)'</span>).innerText;</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">"Second li"</span></code>
<code></code>
<code>document.querySelector(<span style="color: #CC9393;">'p'</span>);</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">&lt;p id="first"&gt;</span></code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Finds the first matching element</span></code>
</pre>
</div>
<div class="NOTES">
<p>
Here are some examples.
</p>

<p>
On the left we have some HTML. On the right, some calls to
<code>querySelector()</code>.
</p>

<p>
In the Javascript, the call in line 1 returns the first <code>p</code> element,
also on line 1 of the HTML. This is because the <code>p</code> element has
an <code>id</code> of "first", and remember that the <code>#</code> sign is how you specify
an ID in CSS.
</p>

<p>
The call on line 5 returns the <code>h1</code> element. Although there are two
elements – the <code>h1</code> and the <code>p</code> that have the <code>warning</code> class,
<code>querySelector</code> returns the <b>first</b> one.
</p>

<p>
The call on line 8 specifically finds the <code>p</code> element because the
selector is more specific.
</p>

<p>
And on line 11 this selector finds the second <code>li</code> element of the
first <code>ul</code> element. And then retrieve's its <code>innerText</code> property.
</p>

</div>
</div>
</div>
</div>

<div id="outline-container-org2a103ac" class="outline-2">
<h2 id="org2a103ac"><span class="section-number-2">12</span> Log the value in the input box</h2>
<div class="outline-text-2" id="text-12">
<ul class="org-ul">
<li>Modify the click listener
<ul class="org-ul">
<li>Retrieve the input widget's value</li>
<li>Log it using <code>console.log</code></li>
</ul></li>
</ul>

<div class="NOTES">
<p>
We can use <code>console.log</code> to verify that we've got the value
correctly before moving on to the next part of the problem.
</p>

</div>
</div>

<div id="outline-container-org74fca70" class="outline-3">
<h3 id="org74fca70"><span class="section-number-3">12.1</span> Solution: Button click listener</h3>
<div class="outline-text-3" id="text-12-1">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">With a variable.</span></code>
<code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">inputBox</span> = document.getElementById(<span style="color: #CC9393;">'item'</span>);</code>
<code>    console.log(inputBox.value);</code>
<code>  });</code>
<code>});</code>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">With chaining.</span></code>
<code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    console.log(document.getElementById(<span style="color: #CC9393;">'item'</span>).value);</code>
<code>  });</code>
<code>});</code>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgddb8d61" class="outline-2">
<h2 id="orgddb8d61"><span class="section-number-2">13</span> Adding list items</h2>
<div class="outline-text-2" id="text-13">
<div class="org-src-container">
<pre class="src src-html"><code>&lt;<span style="color: #93E0E3;">ul</span>&gt;</code>
<code>  <span style="color: #5F7F5F;">&lt;!-- </span><span style="color: #7F9F7F;">List items go here </span><span style="color: #5F7F5F;">--&gt;</span></code>
<code>&lt;/<span style="color: #93E0E3;">ul</span>&gt;</code>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-html"><code>&lt;<span style="color: #93E0E3;">li</span>&gt;&lt;<span style="color: #93E0E3;">span</span>&gt;Eggs&lt;/<span style="color: #93E0E3;">span</span>&gt; &lt;<span style="color: #93E0E3;">button</span>&gt;Delete&lt;/<span style="color: #93E0E3;">button</span>&gt;&lt;/<span style="color: #93E0E3;">li</span>&gt;</code>
</pre>
</div>

<div class="NOTES">
<p>
Now that we can do something when the user clicks the button, and
we can see what text they added, we need to figure out how we're
going to add an item to the list.
</p>

<p>
In our HTML file our list starts out like the example at the top.
It's just the <code>ul</code> element with no children.
</p>

<p>
What we want is to create a new entry in the list for each item.
Each entry is going to need to contain the text that the user
typed in, and a button to delete the item from the list.
</p>

<p>
In other words, it's going to look like the HTML at the bottom.
Except "Eggs" is going to be replaced by whatever the user typed in.
</p>

<p>
This means we need to write a function that can take whatever's in the
<code>input</code>, create a new <code>li</code>, create a <code>span</code>, set the text of the
<code>span</code>, add a button.
</p>

<p>
Before we do that, let's make sure that our understanding of what
the DOM tree for this is going to look like is correct.
</p>

</div>
</div>

<div id="outline-container-org94c93d2" class="outline-3">
<h3 id="org94c93d2"><span class="section-number-3">13.1</span> List item graph</h3>
<div class="outline-text-3" id="text-13-1">
<div class="org-src-container">
<pre class="src src-html"><code>&lt;<span style="color: #93E0E3;">li</span>&gt;&lt;<span style="color: #93E0E3;">span</span>&gt;Eggs&lt;/<span style="color: #93E0E3;">span</span>&gt; &lt;<span style="color: #93E0E3;">button</span>&gt;Delete&lt;/<span style="color: #93E0E3;">button</span>&gt;&lt;/<span style="color: #93E0E3;">li</span>&gt;</code>
</pre>
</div>

<ul class="org-ul">
<li>Draw the DOM tree for this HTML</li>
</ul>

<div class="NOTES">
<p>
This is what we're going to add to the <code>ul</code> element every time
the button is clicked.
</p>

<p>
Go ahead and draw out the tree for these elements.
</p>

<p>
[Wait]
</p>

</div>
</div>
<div id="outline-container-org0bc4f98" class="outline-4">
<h4 id="org0bc4f98"><span class="section-number-4">13.1.1</span> Solution: List item graph</h4>
<div class="outline-text-4" id="text-13-1-1">
<div class="org-src-container">
<pre class="src src-html"><code>&lt;<span style="color: #93E0E3;">li</span>&gt;&lt;<span style="color: #93E0E3;">span</span>&gt;Eggs&lt;/<span style="color: #93E0E3;">span</span>&gt; &lt;<span style="color: #93E0E3;">button</span>&gt;Delete&lt;/<span style="color: #93E0E3;">button</span>&gt;&lt;/<span style="color: #93E0E3;">li</span>&gt;</code>
</pre>
</div>

<div class="figure">
<p><object type="image/svg+xml" data="./JavaScript_files/list-item-graph.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
<div class="NOTES">
<p>
Did everybody's tree look like this?
</p>

<p>
[Wait]
</p>

<p>
For anyone's that didn't.
</p>

<p>
We start with the <code>li</code> element – that's the first node.
</p>

<p>
We see that this has a child element called <code>span</code>, so we add
that to the tree.
</p>

<p>
Then we see that it has some content, so we add that as well.
</p>

<p>
Then the <code>span</code> ends, and a new <code>button</code> element starts. This is
also a child of the <code>li</code> element. And that has some text content
too, so we add that as its own node.
</p>

</div>
</div>
</div>
</div>

<div id="outline-container-org7e189e9" class="outline-3">
<h3 id="org7e189e9"><span class="section-number-3">13.2</span> Exercise: Write a function that creates this tree</h3>
<div class="outline-text-3" id="text-13-2">

<div class="figure">
<p><object type="image/svg+xml" data="./JavaScript_files/list-item-graph.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">createNewListItem</span>(<span style="color: #DFAF8F;">itemName</span>) {</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Fill this in</span></code>
<code>}</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgad3a969" class="outline-3">
<h3 id="orgad3a969"><span class="section-number-3">13.3</span> Exercise (hint): Write a function that creates this tree</h3>
<div class="outline-text-3" id="text-13-3">

<div class="figure">
<p><object type="image/svg+xml" data="./JavaScript_files/list-item-graph.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">createNewListItem</span>(<span style="color: #DFAF8F;">itemName</span>) {</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Create an li node</span></code>
<code></code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Create a span node</span></code>
<code></code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Set the span's .innerText property</span></code>
<code></code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Create a button node</span></code>
<code></code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Set the button's .innerText property</span></code>
<code></code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Append the span to the li node</span></code>
<code></code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Append the button node to the li node</span></code>
<code></code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Return the li node</span></code>
<code>}</code>
</pre>
</div>
</div>
</div>



<div id="outline-container-org407c27f" class="outline-3">
<h3 id="org407c27f"><span class="section-number-3">13.4</span> Solution: Write a function that creates this tree</h3>
<div class="outline-text-3" id="text-13-4">
<div class="org-src-container">
<pre class="src src-javascript" id="org629f3d2"><code><span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">createNewListItem</span>(<span style="color: #DFAF8F;">itemName</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">listItem</span> = document.createElement(<span style="color: #CC9393;">'li'</span>);</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">listText</span> = document.createElement(<span style="color: #CC9393;">'span'</span>);</code>
<code>  listText.textContent = itemName;</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">deleteButton</span> = document.createElement(<span style="color: #CC9393;">'button'</span>);</code>
<code>  deleteButton.textContent = <span style="color: #CC9393;">'Delete'</span>;</code>
<code></code>
<code>  listItem.appendChild(listText);</code>
<code>  listItem.appendChild(deleteButton);</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">return</span> listItem;</code>
<code>}</code>
</pre>
</div>

<div class="NOTES">
<p>
Here's one possible solution.
</p>

<p>
There are 5 sections to this code:
</p>

<ol class="org-ol">
<li>Creating the <code>li</code></li>
<li>Creating and populating the <code>span</code></li>
<li>Creating and populating the <code>button</code></li>
<li>Appending children to the <code>li</code></li>
<li>Returning the value.</li>
</ol>

<p>
Steps 1, 2, and 3 can happen in any order.
</p>

<p>
I'm going to show you some variations of this function.
</p>

</div>
</div>
</div>

<div id="outline-container-orgd9c4da1" class="outline-3">
<h3 id="orgd9c4da1"><span class="section-number-3">13.5</span> Solution: Write a function that creates this tree</h3>
<div class="outline-text-3" id="text-13-5">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">createNewListItem</span>(<span style="color: #DFAF8F;">itemName</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">listItem</span> = document.createElement(<span style="color: #CC9393;">'li'</span>);</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">listText</span> = document.createElement(<span style="color: #CC9393;">'span'</span>);</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">deleteButton</span> = document.createElement(<span style="color: #CC9393;">'button'</span>);</code>
<code></code>
<code>  listText.textContent = itemName;</code>
<code>  deleteButton.textContent = <span style="color: #CC9393;">'Delete'</span>;</code>
<code></code>
<code>  listItem.appendChild(listText);</code>
<code>  listItem.appendChild(deleteButton);</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">return</span> listItem;</code>
<code>}</code>
</pre>
</div>

<div class="NOTES">
<p>
This has exactly the same effect as the previous function. But
here the nodes are created before being modified. This is absoutely
fine.
</p>

<p>
My personal preference is to not do this – I generally prefer it if a
variable is declared as close to where it will be used as possible,
but different people have different opinions about this.
</p>

</div>
</div>
</div>

<div id="outline-container-org578daa8" class="outline-3">
<h3 id="org578daa8"><span class="section-number-3">13.6</span> Solution: Create and append</h3>
<div class="outline-text-3" id="text-13-6">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">createNewListItem</span>(<span style="color: #DFAF8F;">itemName</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">listItem</span> = document.createElement(<span style="color: #CC9393;">'li'</span>);</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">listText</span> = document.createElement(<span style="color: #CC9393;">'span'</span>);</code>
<code>  listText.textContent = itemName;</code>
<code>  listItem.appendChild(listText);</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">deleteButton</span> = document.createElement(<span style="color: #CC9393;">'button'</span>);</code>
<code>  deleteButton.textContent = <span style="color: #CC9393;">'Delete'</span>;</code>
<code>  listItem.appendChild(deleteButton);</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">return</span> listItem;</code>
<code>}</code>
</pre>
</div>

<div class="NOTES">
<p>
This also has the same effect, but we append the nodes to the
list item as soon as we're done with them.
</p>

<p>
This is also a perfectly fine way to do things.
</p>

</div>
</div>
</div>
</div>

<div id="outline-container-org5d5ff03" class="outline-2">
<h2 id="org5d5ff03"><span class="section-number-2">14</span> Adding list items when the button is clicked</h2>
<div class="outline-text-2" id="text-14">
<div class="org-center">
<p>
This is our current click listener
</p>
</div>

<div class="org-src-container">
<pre class="src src-javascript"><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">inputBox</span> = document.getElementById(<span style="color: #CC9393;">'item'</span>);</code>
<code>    console.log(inputBox.value);</code>
<code>  });</code>
<code>});</code>
</pre>
</div>

<ul class="org-ul">
<li>Call <code>createNewListItem</code> to generate the <code>li</code> node</li>
<li>Find the <code>ul</code> element and use <code>appendChild</code> to add the <code>li</code> node</li>
</ul>

<div class="NOTES">
<p>
This is the click listener that we wrote earlier. Yours might have
slightly different variable names, but it should work – when the
button is clicked it should log whatever is in the input widget.
</p>

<p>
Modify this <code>click</code> listener so that it calls <code>createNewListItem</code>
with the input widget's value to create the new <code>li</code> element.
</p>

<p>
Then find the <code>ul</code> element and use <code>appendChild</code> to add the <code>li</code> node.
</p>

<p>
[Wait for everyone to do this]
</p>

</div>
</div>

<div id="outline-container-org0b0e7cc" class="outline-4">
<h4 id="org0b0e7cc"><span class="section-number-4">14.0.1</span> Solution: Adding list items when the button is clicked</h4>
<div class="outline-text-4" id="text-14-0-1">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Variables</span></code>
<code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">inputBox</span> = document.getElementById(<span style="color: #CC9393;">'item'</span>);</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">li</span> = createNewListItem(inputBox.value);</code>
<code>    document.querySelector(<span style="color: #CC9393;">'ul'</span>).appendChild(li);</code>
<code>  });</code>
<code>});</code>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Chaining</span></code>
<code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    document.querySelector(<span style="color: #CC9393;">'ul'</span>).appendChild(</code>
<code>      createNewListItem(document.getElementById(<span style="color: #CC9393;">'item'</span>).value));</code>
<code>  });</code>
<code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
Here's what one solution looks like.
</p>

<p>
We call <code>createNewListItem()</code>, passing it <code>inputBox.value</code>, so it
receives whatever text the user typed in.
</p>

<p>
This returns an <code>li</code> elemnt, which we save in the <code>li</code> variable.
</p>

<p>
On the next line we find the <code>ul</code> element and append our new <code>li</code>
element to the end.
</p>

<p>
[Questions?]
</p>

<p>
This alternative version here does the same thing, but chains
things together instead of using intermediate variables.
</p>

</div>
</div>
</div>
</div>

<div id="outline-container-orgfbdab47" class="outline-2">
<h2 id="orgfbdab47"><span class="section-number-2">15</span> The <code>Delete</code> button</h2>
<div class="outline-text-2" id="text-15">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">createNewListItem</span>(<span style="color: #DFAF8F;">itemName</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">listItem</span> = document.createElement(<span style="color: #CC9393;">'li'</span>);</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">listText</span> = document.createElement(<span style="color: #CC9393;">'span'</span>);</code>
<code>  listText.textContent = itemName;</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">deleteButton</span> = document.createElement(<span style="color: #CC9393;">'button'</span>);</code>
<code>  deleteButton.textContent = <span style="color: #CC9393;">'Delete'</span>;</code>
<code></code>
<code>  listItem.appendChild(listText);</code>
<code>  listItem.appendChild(deleteButton);</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">return</span> listItem;</code>
<code>}</code>
</pre>
</div>

<div class="NOTES">
<p>
Now that adding items to the list works we need to figure out how
we're going to delete them.
</p>

<p>
Deleting a list item is the same thing as deleting (or removing) it
from the DOM tree.
</p>

<p>
This is the code that I wrote that creates and returns a new list
item. We talked about this code a few slides back – your code
might look slightly different, but the end result is the same.
</p>

<p>
The important bit for the delete button is finding the place in
the code where the button is created. In my code that's right here,
lines 7 and 8.
</p>

<p>
Go ahead and find that spot in your code.
</p>

<p>
Because we're going to make a change right there.
</p>

<p>
Let me know when you've found your equivalent code.
</p>

</div>
</div>

<div id="outline-container-org70b8b5e" class="outline-3">
<h3 id="org70b8b5e"><span class="section-number-3">15.1</span> Exercise: Checking we can detect the click</h3>
<div class="outline-text-3" id="text-15-1">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">createNewListItem</span>(<span style="color: #DFAF8F;">itemName</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">listItem</span> = document.createElement(<span style="color: #CC9393;">'li'</span>);</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">listText</span> = document.createElement(<span style="color: #CC9393;">'span'</span>);</code>
<code>  listText.textContent = itemName;</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">deleteButton</span> = document.createElement(<span style="color: #CC9393;">'button'</span>);</code>
<code>  deleteButton.textContent = <span style="color: #CC9393;">'Delete'</span>;</code>
<code></code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Add a click handler that logs the click here</span></code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">...</span></code>
<code></code>
<code>  listItem.appendChild(listText);</code>
<code>  listItem.appendChild(deleteButton);</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">return</span> listItem;</code>
<code>}</code>
</pre>
</div>

<div class="NOTES">
<p>
As always, let's make sure we can detect the click before we do
anything more complicated.
</p>

<p>
We're always trying to make the simplest change that can work, and then
build upon it.
</p>

<p>
So, change your <code>createNewListItem</code> function and add a click listener
after the delete button has been created.
</p>

<p>
This is my code, so I'd put the new code where the comment is. Your
code might create the elements in a slightly different order, but
as long as you create the handler after the button is created you'll
be OK.
</p>

<p>
This click listener is going to be just like the one we made for the
"Add Item" button a while back – it does has to listen for the
<code>click</code> event and use <code>console.log</code> to send a message to the console.
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>

<div id="outline-container-orgc2b9f9e" class="outline-3">
<h3 id="orgc2b9f9e"><span class="section-number-3">15.2</span> Solution: Checking we can detect the click</h3>
<div class="outline-text-3" id="text-15-2">
<div class="org-src-container">
<pre class="src src-javascript" id="org57ffaee"><code><span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">createNewListItem</span>(<span style="color: #DFAF8F;">itemName</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">listItem</span> = document.createElement(<span style="color: #CC9393;">'li'</span>);</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">listText</span> = document.createElement(<span style="color: #CC9393;">'span'</span>);</code>
<code>  listText.textContent = itemName;</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">deleteButton</span> = document.createElement(<span style="color: #CC9393;">'button'</span>);</code>
<code>  deleteButton.textContent = <span style="color: #CC9393;">'Delete'</span>;</code>
<code></code>
<code>  deleteButton.addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    console.log(<span style="color: #CC9393;">'Delete button clicked'</span>);</code>
<code>  });</code>
<code></code>
<code>  listItem.appendChild(listText);</code>
<code>  listItem.appendChild(deleteButton);</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">return</span> listItem;</code>
<code>}</code>
</pre>
</div>

<div class="NOTES">
<p>
Here's my solution. There's nothing special here that we haven't
done before.
</p>

<p>
I add an event listener for the <code>click</code> event to the delete
button, and when it's clicked I used <code>console.log</code> to confirm
that the listener was working.
</p>

<p>
That's the new code on lines 10, 11, and 12. Everything else is
the same.
</p>

</div>
</div>
</div>
<div id="outline-container-orgf15a448" class="outline-3">
<h3 id="orgf15a448"><span class="section-number-3">15.3</span> Removing DOM nodes</h3>
<div class="outline-text-3" id="text-15-3">
<ul class="org-ul">
<li>[<a href="https://developer.mozilla.org/en-US/docs/Web/API/ChildNode/remove">MDN remove element</a>] / [<a href="https://developer.mozilla.org/en-US/docs/Web/API/ChildNode/remove">MDN delete element</a>]</li>
</ul>

<div class="NOTES">
<p>
Now that we know we can detect the click and run an event listener we
need to find out how we delete the current list item from the tree.
</p>

<p>
For that we can use the documentation again. Try one of these
searches in Google, and read the documentation that comes up.
</p>

<p>
See if you can figure out what <b>one line of code</b> we need to write
in the click event listener to delete the listitem when the
button is clicked.
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>

<div id="outline-container-org9a03de6" class="outline-3">
<h3 id="org9a03de6"><span class="section-number-3">15.4</span> Solution: Removing DOM nodes</h3>
<div class="outline-text-3" id="text-15-4">
<div class="org-src-container">
<pre class="src src-javascript"><code>element.remove();</code>
</pre>
</div>

<div class="NOTES">
<p>
The general way to remove an element from the DOM tree is to
call its <code>remove()</code> method.  If you do this then the element,
and anything that it contains, will be deleted.
</p>

</div>
</div>

<div id="outline-container-org14c522b" class="outline-4">
<h4 id="org14c522b"><span class="section-number-4">15.4.1</span> <code>remove()</code> and the DOM</h4>
<div class="outline-text-4" id="text-15-4-1">
<div class="org-src-container">
<pre class="src src-html"><code>&lt;<span style="color: #93E0E3;">ul</span>&gt;</code>
<code>  &lt;<span style="color: #93E0E3;">li</span>&gt;&lt;<span style="color: #93E0E3;">span</span>&gt;Eggs&lt;/<span style="color: #93E0E3;">span</span>&gt; &lt;<span style="color: #93E0E3;">button</span>&gt;Delete&lt;/<span style="color: #93E0E3;">button</span>&gt;&lt;/<span style="color: #93E0E3;">li</span>&gt;</code>
<code>  &lt;<span style="color: #93E0E3;">li</span>&gt;&lt;<span style="color: #93E0E3;">span</span>&gt;Milk&lt;/<span style="color: #93E0E3;">span</span>&gt; &lt;<span style="color: #93E0E3;">button</span>&gt;Delete&lt;/<span style="color: #93E0E3;">button</span>&gt;&lt;/<span style="color: #93E0E3;">li</span>&gt;</code>
<code>  &lt;<span style="color: #93E0E3;">li</span>&gt;&lt;<span style="color: #93E0E3;">span</span>&gt;Bread&lt;/<span style="color: #93E0E3;">span</span>&gt; &lt;<span style="color: #93E0E3;">button</span>&gt;Delete&lt;/<span style="color: #93E0E3;">button</span>&gt;&lt;/<span style="color: #93E0E3;">li</span>&gt;</code>
<code>&lt;/<span style="color: #93E0E3;">ul</span>&gt;</code>
</pre>
</div>

<div class="NOTES">
<p>
Imagine our list has three list items in it, for "Eggs", "Milk",
and "Bread", like this.
</p>

</div>
</div>
</div>

<div id="outline-container-orgd3434b3" class="outline-4">
<h4 id="orgd3434b3"><span class="section-number-4">15.4.2</span> <code>remove()</code> and the DOM</h4>
<div class="outline-text-4" id="text-15-4-2">

<div class="figure">
<p><object type="image/svg+xml" data="./JavaScript_files/list-item-graph2.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>

<div class="NOTES">
<p>
This is what the DOM tree for that looks like.
</p>

<p>
Does this make sense to everyone so far?
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>

<div id="outline-container-org0f8bdda" class="outline-4">
<h4 id="org0f8bdda"><span class="section-number-4">15.4.3</span> Finding the second list item</h4>
<div class="outline-text-4" id="text-15-4-3">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">secondLi</span> = document.querySelector(<span style="color: #CC9393;">'li:nth-child(2)'</span>);</code>
</pre>
</div>


<div class="figure">
<p><object type="image/svg+xml" data="./JavaScript_files/list-item-graph3.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
</div>
</div>

<div id="outline-container-orge4ed6af" class="outline-4">
<h4 id="orge4ed6af"><span class="section-number-4">15.4.4</span> Removing the second list item</h4>
<div class="outline-text-4" id="text-15-4-4">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">secondLi</span> = document.querySelector(<span style="color: #CC9393;">'li:nth-child(2)'</span>);</code>
<code>secondLi.remove();</code>
</pre>
</div>


<div class="figure">
<p><object type="image/svg+xml" data="./JavaScript_files/list-item-graph4.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
</div>
</div>


<div id="outline-container-org47a39ba" class="outline-4">
<h4 id="org47a39ba"><span class="section-number-4">15.4.5</span> Exercise: Remove the listitem when the delete button is clicked</h4>
<div class="outline-text-4" id="text-15-4-5">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">createNewListItem</span>(<span style="color: #DFAF8F;">itemName</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">listItem</span> = document.createElement(<span style="color: #CC9393;">'li'</span>);</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">listText</span> = document.createElement(<span style="color: #CC9393;">'span'</span>);</code>
<code>  listText.textContent = itemName;</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">deleteButton</span> = document.createElement(<span style="color: #CC9393;">'button'</span>);</code>
<code>  deleteButton.textContent = <span style="color: #CC9393;">'Delete'</span>;</code>
<code></code>
<code>  deleteButton.addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    console.log(<span style="color: #CC9393;">'Delete button clicked'</span>);</code>
<code>  });</code>
<code></code>
<code>  listItem.appendChild(listText);</code>
<code>  listItem.appendChild(deleteButton);</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">return</span> listItem;</code>
<code>}</code>
</pre>
</div>

<div class="NOTES">
<p>

</p>

</div>
</div>
</div>
<div id="outline-container-org14698fe" class="outline-4">
<h4 id="org14698fe"><span class="section-number-4">15.4.6</span> Solution: Remove the listitem when the delete button is clicked</h4>
<div class="outline-text-4" id="text-15-4-6">
<div class="org-src-container">
<pre class="src src-javascript" id="org1bff6d7"><code><span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">createNewListItem</span>(<span style="color: #DFAF8F;">itemName</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">listItem</span> = document.createElement(<span style="color: #CC9393;">'li'</span>);</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">listText</span> = document.createElement(<span style="color: #CC9393;">'span'</span>);</code>
<code>  listText.textContent = itemName;</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">deleteButton</span> = document.createElement(<span style="color: #CC9393;">'button'</span>);</code>
<code>  deleteButton.textContent = <span style="color: #CC9393;">'Delete'</span>;</code>
<code></code>
<code>  deleteButton.addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    listItem.remove();</code>
<code>  });</code>
<code></code>
<code>  listItem.appendChild(listText);</code>
<code>  listItem.appendChild(deleteButton);</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">return</span> listItem;</code>
<code>}</code>
</pre>
</div>

<div class="NOTES">
<p>
Here we simply call the <code>remove</code> method on the <code>listItem</code>.
</p>

</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgeb6278f" class="outline-2">
<h2 id="orgeb6278f"><span class="section-number-2">16</span> Recap: What have we learned?</h2>
<div class="outline-text-2" id="text-16">
<ul class="org-ul">
<li>Widgets
<ul class="org-ul">
<li><code>input</code>
<ul class="org-ul">
<li>Different types exist, <code>type=...</code></li>
<li>Retrieving the value</li>
</ul></li>
<li><code>button</code>
<ul class="org-ul">
<li>Reacting to clicks</li>
</ul></li>
<li><code>label</code></li>
</ul></li>
</ul>
<ul class="org-ul">
<li><code>document.querySelector('...')</code>
<ul class="org-ul">
<li>More flexible way to select elements</li>
</ul></li>
<li><code>element.remove()</code>
<ul class="org-ul">
<li>To remove elements from the DOM</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org703cf67" class="outline-2">
<h2 id="org703cf67"><span class="section-number-2">17</span> Play</h2>
<div class="outline-text-2" id="text-17">
<ul class="org-ul">
<li>Play around with the shopping list</li>
<li>Identify things we could change to make it easier for users</li>
</ul>
</div>
</div>

<div id="outline-container-org28395ba" class="outline-2">
<h2 id="org28395ba"><span class="section-number-2">18</span> UX followup work</h2>
<div class="outline-text-2" id="text-18">
<ul class="org-ul">
<li>Press <code>ENTER</code> to add an item</li>
<li>Clear the input widget after adding an item</li>
<li>Setting the input focus</li>
<li>Prevent empty items from being added</li>
</ul>

<div class="NOTES">
<p>
So, there's good news and bad news.
</p>

<p>
The good news is that our CEO is very happy with our work, and
thinks that our shopping list app could make a fortune.
</p>

<p>
The bad news is that we've done some user experience tests with
early adopters, and they've identified a number of things that
they'd like us to change about the app.
</p>

<p>
They are:
</p>

<ul class="org-ul">
<li>At the moment they have to click the button to add an item. They'd
like to press the Enter key as well</li>

<li>After they've added an item it's still in the input widget. So they
have to delete whatever they typed in last before entering a new
item</li>

<li>Some of them use the keyboard a lot, and they keep having to use
the mouse to click in the input box before they can type there</li>

<li>It's really easy to add empty items to the list</li>
</ul>

<p>
Lets get on and fix those problems.
</p>

</div>
</div>
</div>

<div id="outline-container-orgcb8562f" class="outline-2">
<h2 id="orgcb8562f"><span class="section-number-2">19</span> Press ENTER to add an item</h2>
<div class="outline-text-2" id="text-19">
<ul class="org-ul">
<li>Need to click the button to add the item</li>
<li>Natural to press ENTER to add to the list</li>
<li>How?</li>
</ul>
</div>

<div id="outline-container-orga3592bd" class="outline-3">
<h3 id="orga3592bd"><span class="section-number-3">19.1</span> MDN key events</h3>
<div class="outline-text-3" id="text-19-1">
<ul class="org-ul">
<li>Search MDN for information about keyboard events</li>
<li>Look for information about keys being released</li>
</ul>

<div class="NOTES">
<p>
Given the events we've been dealing with so far, you're probably not
surprised to know that events also fire when the user presses and
releases keys.
</p>

<p>
Search MDN for information about keyboard events, look particularly
for anything that can tell you when a key has been released by
the user.
</p>

<p>
[Wait]
</p>

<p>
What did you find?
</p>

</div>
</div>
</div>

<div id="outline-container-org91d1578" class="outline-3">
<h3 id="org91d1578"><span class="section-number-3">19.2</span> <code>keyup</code> event properties</h3>
<div class="outline-text-3" id="text-19-2">
<div class="org-center">
<p>
<a href="https://developer.mozilla.org/en-US/docs/Web/Events/keyup">https://developer.mozilla.org/en-US/docs/Web/Events/keyup</a>
</p>
</div>

<div class="org-src-container">
<pre class="src src-javascript"><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  ...</code>
<code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
So far our event listeners have only been interested in whether
or not the event occurred. There's nothing else about the event
that's interesting to them.
</p>

<p>
Things are different for the <code>keyup</code> event. Here, we don't just
want to know that a key was released, we want to know which key
was released – specifically, was it the ENTER key?
</p>

<p>
All of our event listeners have taken an <code>event</code> parameter, but
we haven't used it.
</p>

<p>
This parameter is where the browser tells us extra things about
the event so that we can make decisions about it.
</p>

<p>
The documentation for each event tells us what properties the
event parameter has for this type of event, and what they mean.
</p>

<p>
Looking through these there are a number of things we haven't
covered yet, including event bubbling and cancellation. Don't worry
about those.
</p>

<p>
I'm more interested in these ones here – from <code>char</code> on down.
These all sound like they'll tell us more information about
the key that was released.
</p>

<p>
The <code>key</code> property looks interesting, based on its description.
Reading that, it sounds like regular keys will have a <code>key</code>
value like the key itself, so if you press <code>a</code> then the value
will the string <code>a</code>, <code>b</code> is <code>b</code>, and so on.
</p>

<p>
This note here about <code>Key values</code> is also interesting. This
strongly suggests that special keys, like <code>Enter</code>, are
represented specially, so lets look at that doc for more
information.
</p>

<p>
<a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values">Key values</a>
</p>

<p>
So this document has lots of tables. It looks like the first
column is the value of that <code>key</code> property, and then there are
more details.
</p>

<p>
Looking at the scroll bar on the right tells me that this is
a huge document, so I'm going to just search for <code>Enter</code> and
see if anything turns up.
</p>

<p>
[Search for Enter]
</p>

<p>
And straightaway, we can see that if the user presses the
Enter key we should get a <code>key</code> value of the string <code>Enter</code>. I
can tell that it's a string because it's surrounded by double
quotes.
</p>

</div>
</div>
</div>

<div id="outline-container-org76e1c85" class="outline-3">
<h3 id="org76e1c85"><span class="section-number-3">19.3</span> Exercise: Listening for <code>keyup</code> and inspecting <code>event.key</code></h3>
<div class="outline-text-3" id="text-19-3">
<div class="org-src-container">
<pre class="src src-javascript"><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">...</span></code>
<code>  });</code>
<code></code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Add code here that listen for 'keyup' on the 'input' element</span></code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">and logs the event.key property.</span></code>
<code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
Lets go and check that our understanding is correct, by writing an
input event listener that listens for <code>keyup</code> events on the input
widget and logs the results.
</p>

<p>
Do this, and let me know when it's done, and you have confirmed
which string is used to repesent the ENTER key.
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>

<div id="outline-container-org4e2d614" class="outline-3">
<h3 id="org4e2d614"><span class="section-number-3">19.4</span> Solution: Listening for <code>keyup</code> and inspecting <code>event.key</code></h3>
<div class="outline-text-3" id="text-19-4">
<div class="org-src-container">
<pre class="src src-javascript" id="org78a9d51"><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">...</span></code>
<code>  });</code>
<code></code>
<code>  document.querySelector(<span style="color: #CC9393;">'input'</span>).addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    console.log(event.key);</code>
<code>  });</code>
<code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
Here's a solution – the new event listener here simply logs the
<code>key</code> property of the <code>event</code> argument so we can take a look at it.
</p>

<p>
What special string is used if the user presses the ENTER key?
</p>

<p>
[Wait]
</p>

<p>
Are there strings for any other special keys?
</p>

<p>
[Wait]
</p>

<p>
<code>Control</code>, <code>Shift</code>, <code>Alt</code>, <code>AltGraph</code>, <code>CapsLock</code>
</p>

</div>
</div>
</div>

<div id="outline-container-orgbe5101a" class="outline-3">
<h3 id="orgbe5101a"><span class="section-number-3">19.5</span> How do we use this?</h3>
<div class="outline-text-3" id="text-19-5">
<div class="NOTES">
<p>
Now we know that we can tell if the user pressed the ENTER key in
the input widget.
</p>

<p>
At the moment we're just logging the key that was pressed. We need
to be able to run some code only if the key that was pressed is
ENTER.
</p>

<p>
How do we do that?
</p>

</div>
</div>
</div>
<div id="outline-container-org863e2ef" class="outline-3">
<h3 id="org863e2ef"><span class="section-number-3">19.6</span> Making a decision: using <code>if</code> statements</h3>
<div class="outline-text-3" id="text-19-6">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">if</span> (expression) {</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Code that only runs if 'expression' is true</span></code>
<code>  <span style="color: #5F7F5F;">//</span></code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">We call this the "body" of the "if" block.</span></code>
<code>}</code>
</pre>
</div>

<div class="NOTES">
<p>
The answer to that is an <code>if</code> statement.
</p>

<p>
We haven't seen these yet.
</p>

<p>
Remember when we first talked about the flow of control. Initially
control in the program flows down, line by line by line.
</p>

<p>
Then we introduced functions, which allows the flow to jump to a
different function, run the code that's in that function, and then
jump back to carry on where it left off.
</p>

<p>
<code>if</code> statements change the flow so that some code – the code inside
the <code>if</code> block – runs only if the expression inside the parentheses
is true.
</p>

<p>
Notice how the <code>if</code> block uses curly brackets – just like functions –
to enclose the code that might run.
</p>

</div>
</div>
</div>
<div id="outline-container-orga6d90af" class="outline-3">
<h3 id="orga6d90af"><span class="section-number-3">19.7</span> True and false values in Javascript?</h3>
<div class="outline-text-3" id="text-19-7">
<ul class="org-ul">
<li>False values
<ul class="org-ul">
<li><code>false</code></li>
<li><code>undefined</code></li>
<li><code>null</code></li>
<li><code>NaN</code></li>
<li><code>0</code> (number zero)</li>
<li><code>''</code> (empty string)</li>
</ul></li>
</ul>
<ul class="org-ul">
<li>True values
<ul class="org-ul">
<li>Everything else</li>
</ul></li>
</ul>
<div class="NOTES">
<p>
Looked a little bit at these earlier in the week.
</p>

<p>
TODO: Look back to when that was and what was discussed
</p>

<p>
On the left hand side is every value that Javascript considers to be
false. If the result of an expression evalutes to false and the
expression is used in an <code>if</code> condition, the body of the <code>if</code> will not
run.
</p>

</div>
</div>
</div>
<div id="outline-container-orga16725f" class="outline-3">
<h3 id="orga16725f"><span class="section-number-3">19.8</span> Comparison operators, numbers</h3>
<div class="outline-text-3" id="text-19-8">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">a</span> = 10;</code>
<code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">b</span> = 20;</code>
<code></code>
<code>a === b;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">false, === means "is equal to?"</span></code>
<code>a !== b;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">true,  !== means "is not equal to?"</span></code>
<code>a &lt;   b;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">true,  &lt;   means "is less than?"</span></code>
<code>a &gt;   b;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">false, &gt;   means "is greater than?"</span></code>
<code>a &lt;=  b;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">true,  &lt;=  means "is less than or equal to?"</span></code>
<code>a &gt;=  b;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">false, &gt;=  means "is greater than or equal to?"</span></code>
</pre>
</div>

<div class="NOTES">
<p>
Javascript supports numerous operators that are used to compare two
or more values.
</p>

<p>
Here are the six most common, and what they return.
</p>

<p>
Try all of these in the console, and make sure you get the same
result.
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>

<div id="outline-container-org8d15c6c" class="outline-3">
<h3 id="org8d15c6c"><span class="section-number-3">19.9</span> Comparison operators, strings</h3>
<div class="outline-text-3" id="text-19-9">
<div class="org-src-container">
<pre class="src src-javascript" id="org8843211"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">c</span> = <span style="color: #CC9393;">'This is a string'</span>;</code>
<code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">d</span> = <span style="color: #CC9393;">'This is also a string'</span>;</code>
<code></code>
<code>c === d;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">false, === means "is equal to?"</span></code>
<code>c !== d;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">true,  !== means "is not equal to?"</span></code>
<code>c &lt;   d;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">true,  &lt;   means "is less than?"</span></code>
<code>c &gt;   d;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">false, &gt;   means "is greater than?"</span></code>
<code>c &lt;=  d;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">true,  &lt;=  means "is less than or equal to?"</span></code>
<code>c &gt;=  d;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">false, &gt;=  means "is greater than or equal to?"</span></code>
</pre>
</div>

<div class="NOTES">
<p>
You can use these same operators to compare strings. Try these out
in the console.
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>
<div id="outline-container-org8e127ab" class="outline-3">
<h3 id="org8e127ab"><span class="section-number-3">19.10</span> What does <code>&lt;</code> and <code>&gt;</code> mean for strings?</h3>
<div class="outline-text-3" id="text-19-10">
<ul class="org-ul">
<li>Dictionary order</li>
</ul>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">let c = 'This is a string';</span></code>
<code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">let d = 'This is also a string';</span></code>
<code></code>
<code>c &lt; d;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">true</span></code>
<code></code>
<code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">e</span> = <span style="color: #CC9393;">'Another string example'</span>;</code>
<code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">f</span> = <span style="color: #CC9393;">'Another example string'</span>;</code>
<code></code>
<code>e &lt; f;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">false, 'e' comes before 's'</span></code>
</pre>
</div>

<div class="NOTES">
<p>
Strings are compared in dictionary order. Imagine that you had to put
the string in a dictionary. Any word, or string that would occur first
in the dictionary is <b>less than</b> any word or string that would appear
after.
</p>

<p>
Here, strings <code>e</code> and <code>f</code> are different from the first letter of the
second word. Since the <code>e</code> in <code>example</code> is before the <code>s</code> in <code>string</code>,
string <code>f</code> is less then string <code>e</code>, and the comparison is false.
</p>

</div>
</div>
</div>

<div id="outline-container-org71d9fbb" class="outline-3">
<h3 id="org71d9fbb"><span class="section-number-3">19.11</span> Expressions can mix variables and values</h3>
<div class="outline-text-3" id="text-19-11">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">let a = 10;</span></code>
<code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">let c = 'This is a string';</span></code>
<code></code>
<code>a &gt; 5;                      <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">true</span></code>
<code>a &lt;= 10;                    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">true</span></code>
<code></code>
<code>c === <span style="color: #CC9393;">'This is a string'</span>;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">true</span></code>
</pre>
</div>

<div class="NOTES">
<p>
Of course expressions can mix variables and values. Here are some
examples of that.
</p>

<p>
Try these out too.
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>
<div id="outline-container-org5d1e55a" class="outline-3">
<h3 id="org5d1e55a"><span class="section-number-3">19.12</span> Warning: <code>==</code> and <code>!=</code></h3>
<div class="outline-text-3" id="text-19-12">
<ul class="org-ul">
<li>Do not use <code>==</code> and <code>!=</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">g</span> = 10;</code>
<code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">h</span> = <span style="color: #CC9393;">'10'</span>;</code>
<code></code>
<code>g === h;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">false, comparing numbers and strings</span></code>
<code>g ==  h;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">true, Javascript converts h to a number first (DANGER)</span></code>
<code></code>
<code>g + 1 == h + 1;  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">false (DANGER)</span></code>
</pre>
</div>

<div class="NOTES">
<p>
Javascript has two other equality operators, the double-equals, and the
bang-equals.
</p>

<p>
You will probably see them in older code.
</p>

<p>
You should not use them.
</p>

<p>
Rembeer how values have types – a number, or a string say.
Triple-equals returns true only if the values are the same and the
types are the same.  In this first comparison here it returns false
because the types don't match.
</p>

<p>
Single-equals and bang-equals don't do this. If the types don't match it
tries to convert them. So on this line here the result is true, because
it convers the string one-zero to the number ten first, and that is
equal.
</p>

<p>
This can lead to very strange behaviour. For example, if you have two
values that are identical according to double-equals, and add 1 to both
values you think that the results would be the same.
</p>

<p>
But they're not, because the plus-sign in Javascript does different
things depending on whether the value is a number or a string.
</p>

<p>
This can lead to subtle bugs, so always use triple-equals and
bang-equals-equals.
</p>

</div>
</div>
</div>

<div id="outline-container-orgd002fbd" class="outline-3">
<h3 id="orgd002fbd"><span class="section-number-3">19.13</span> Reminder: <code>if</code> statement syntax</h3>
<div class="outline-text-3" id="text-19-13">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">if</span> (expression) {</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Code that only runs if 'expression' is true</span></code>
<code>  <span style="color: #5F7F5F;">//</span></code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">We call this the "body" of the "if" block.</span></code>
<code>}</code>
</pre>
</div>

<div class="NOTES">
<p>
So as a quick reminder after all that, this is the structure of an
<code>if</code> statement.
</p>

<p>
We have the <code>if</code> keyword, an expression in parentheses, and then the
code to run if the expression is true inside curly brackets.
</p>

</div>
</div>
</div>

<div id="outline-container-org6166209" class="outline-3">
<h3 id="org6166209"><span class="section-number-3">19.14</span> Exercise: Only log the key if it's <code>Enter</code></h3>
<div class="outline-text-3" id="text-19-14">
<div class="org-src-container">
<pre class="src src-javascript"><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">...</span></code>
<code>  });</code>
<code></code>
<code>  document.querySelector(<span style="color: #CC9393;">'input'</span>).addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    console.log(event.key);</code>
<code>  });</code>
<code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
Here's our current logging code.
</p>

<p>
Change this so that the key is only logged if it's <code>Enter</code>
</p>

<p>
[Wait]
</p>

</div>
</div>

<div id="outline-container-org437c927" class="outline-4">
<h4 id="org437c927"><span class="section-number-4">19.14.1</span> Exercise (hint): Only log the key if it's <code>Enter</code></h4>
<div class="outline-text-4" id="text-19-14-1">
<div class="org-src-container">
<pre class="src src-javascript"><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">...</span></code>
<code>  });</code>
<code></code>
<code>  document.querySelector(<span style="color: #CC9393;">'input'</span>).addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (<span style="color: #5F7F5F;">/* </span><span style="color: #7F9F7F;">What goes here? */</span>) {</code>
<code>      console.log(event.key);</code>
<code>    }</code>
<code>  });</code>
<code>});</code>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7e0ba19" class="outline-3">
<h3 id="org7e0ba19"><span class="section-number-3">19.15</span> Solution: Only log the key if it's <code>Enter</code></h3>
<div class="outline-text-3" id="text-19-15">
<div class="org-src-container">
<pre class="src src-javascript" id="org960b336"><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">...</span></code>
<code>  });</code>
<code></code>
<code>  document.querySelector(<span style="color: #CC9393;">'input'</span>).addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key === <span style="color: #CC9393;">'Enter'</span>) {</code>
<code>      console.log(event.key);</code>
<code>    }</code>
<code>  });</code>
<code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
If this is working then you should see that the log message only
appears when you press the Enter key.
</p>

<p>
[Demo this in WebStorm to show the control flow changing]
</p>

</div>
</div>
</div>
<div id="outline-container-orgd1d9302" class="outline-3">
<h3 id="orgd1d9302"><span class="section-number-3">19.16</span> Exercise: Adding the item if the ENTER key is released</h3>
<div class="outline-text-3" id="text-19-16">
<div class="org-src-container">
<pre class="src src-javascript"><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">...</span></code>
<code>  });</code>
<code></code>
<code>  document.querySelector(<span style="color: #CC9393;">'input'</span>).addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key === <span style="color: #CC9393;">'Enter'</span>) {</code>
<code>      console.log(event.key);</code>
<code>    }</code>
<code>  });</code>
<code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
So, back to our code. And the last thing we need to do here is to
replace the logging code with code that creates the new list item
and appends it to the list, exactly as the code for clicking the
button does.
</p>

<p>
Off you go.
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>
<div id="outline-container-orgf2a223c" class="outline-3">
<h3 id="orgf2a223c"><span class="section-number-3">19.17</span> Solution: Adding the item if the ENTER key is released</h3>
<div class="outline-text-3" id="text-19-17">
<div class="org-src-container">
<pre class="src src-javascript"><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">...</span></code>
<code>  });</code>
<code></code>
<code>  document.querySelector(<span style="color: #CC9393;">'input'</span>).addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key === <span style="color: #CC9393;">'Enter'</span>) {</code>
<code>      <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">inputBox</span> = document.getElementById(<span style="color: #CC9393;">'item'</span>);</code>
<code>      <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">li</span> = createNewListItem(inputBox.value);</code>
<code>      document.querySelector(<span style="color: #CC9393;">'ul'</span>).appendChild(li);</code>
<code>    }</code>
<code>  });</code>
<code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
And here's that final part of the function.
</p>

<p>
We listen for the keyup event, and check to see if it's the Enter
key here.
</p>

<p>
If it is then this block will run, and this is the same code that we
used to create a new list item and add it to the list.
</p>

</div>
</div>
</div>
<div id="outline-container-orge6a3d86" class="outline-3">
<h3 id="orge6a3d86"><span class="section-number-3">19.18</span> Recap: What have we learned?</h3>
<div class="outline-text-3" id="text-19-18">
<ul class="org-ul">
<li>Events fire for keypresses
<ul class="org-ul">
<li><code>keyup</code></li>
<li><code>keydown</code></li>
<li><code>keypress</code></li>
</ul></li>
<li>The <code>event</code> parameter
<ul class="org-ul">
<li>Holds event-specific information</li>
<li>MDN documentation has info</li>
</ul></li>
</ul>
<ul class="org-ul">
<li>Decisions with <code>if</code>
<ul class="org-ul">
<li>Expressions, true/false values</li>
</ul></li>
<li>Different comparison operators</li>
<li>Don't use <code>==</code> and <code>!=</code></li>
</ul>
</div>
</div>
<div id="outline-container-org60f1f7c" class="outline-3">
<h3 id="org60f1f7c"><span class="section-number-3">19.19</span> Add and commit the changes</h3>
</div>
</div>
<div id="outline-container-org132a914" class="outline-2">
<h2 id="org132a914"><span class="section-number-2">20</span> Clear the input widget after adding an item</h2>
<div class="outline-text-2" id="text-20">
</div>
<div id="outline-container-org5c7a336" class="outline-3">
<h3 id="org5c7a336"><span class="section-number-3">20.1</span> Problems</h3>
<div class="outline-text-3" id="text-20-1">
<ul class="org-ul">
<li>The user has to delete the text in the input widget</li>
<li>And if they double-click, or press <code>Enter</code> twice then the item is added twice</li>
<li>Fix this by clearing the <code>input</code> widget after appending the list item</li>
<li>We've already seen how</li>
</ul>
</div>
</div>

<div id="outline-container-org9f31cd7" class="outline-3">
<h3 id="org9f31cd7"><span class="section-number-3">20.2</span> Exercise: Clear the input widget</h3>
<div class="outline-text-3" id="text-20-2">
<div class="org-src-container">
<pre class="src src-javascript"><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Existing code that adds to the list</span></code>
<code></code>
<code>    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">&lt;-- new code goes here</span></code>
<code>  });</code>
<code></code>
<code>  document.querySelector(<span style="color: #CC9393;">'input'</span>).addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Existing code that adds to the list</span></code>
<code></code>
<code>    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">&lt;-- new code goes here</span></code>
<code>  });</code>
<code>});</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb9a4671" class="outline-3">
<h3 id="orgb9a4671"><span class="section-number-3">20.3</span> Solution: Clear the input widget</h3>
<div class="outline-text-3" id="text-20-3">
<div class="org-src-container">
<pre class="src src-javascript"><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Existing code that adds to the list</span></code>
<code></code>
<code>    inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<code>  });</code>
<code></code>
<code>  document.querySelector(<span style="color: #CC9393;">'input'</span>).addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Existing code that adds to the list</span></code>
<code></code>
<code>    inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<code>  });</code>
<code>});</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2c1500f" class="outline-3">
<h3 id="org2c1500f"><span class="section-number-3">20.4</span> Add and commit the changes</h3>
</div>
</div>
<div id="outline-container-org12c6533" class="outline-2">
<h2 id="org12c6533"><span class="section-number-2">21</span> Setting the input focus</h2>
<div class="outline-text-2" id="text-21">
</div>
<div id="outline-container-org590518e" class="outline-3">
<h3 id="org590518e"><span class="section-number-3">21.1</span> Focus means "Where do your keystrokes go?"</h3>
<div class="outline-text-3" id="text-21-1">
<div class="NOTES">
<p>
On a form with multiple controls, like this (an input widget and a
button), where do you keystrokes go?
</p>

<p>
For example, you can press SPACE to click the button. Or you can
press SPACE to put a space in the input widget. How does the system
decide what happens when SPACE is pressed?
</p>

<p>
We say that there is the <b>focus</b>. Only one widget at a time has
the focus. It's where your clicks and keystrokes go.
</p>

</div>
</div>
</div>

<div id="outline-container-org1ee9f53" class="outline-3">
<h3 id="org1ee9f53"><span class="section-number-3">21.2</span> The focus moves with TAB key</h3>
<div class="outline-text-3" id="text-21-2">
<div class="NOTES">
<p>
Click on the input widget.
</p>

<p>
You should see a blue highlight around it – the colour might change
depending on your system.
</p>

<p>
This highlight means that the input widget has the focus.
</p>

<p>
Press the TAB key. The focus should have shifted to the button.
</p>

<p>
[Wait]
</p>

<p>
Press the TAB key again. Where has the focus gone now?
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>

<div id="outline-container-orgcacb89f" class="outline-3">
<h3 id="orgcacb89f"><span class="section-number-3">21.3</span> Javascript has methods to set the focus</h3>
<div class="outline-text-3" id="text-21-3">
<ul class="org-ul">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus">MDN element focus</a></li>
</ul>

<div class="NOTES">
<p>
Javascript provides methods to set the focus to a given element.
</p>

<p>
Do this search to read up on how to do it.
</p>

</div>
</div>
</div>

<div id="outline-container-org2b4b1bf" class="outline-3">
<h3 id="org2b4b1bf"><span class="section-number-3">21.4</span> Exercise: Give the input widget the focus after adding an item</h3>
<div class="outline-text-3" id="text-21-4">
<ul class="org-ul">
<li>No code hint this time. See how you do!</li>
</ul>

<div class="NOTES">
<p>
[Wait]
</p>

</div>
</div>
</div>
<div id="outline-container-org15f656f" class="outline-3">
<h3 id="org15f656f"><span class="section-number-3">21.5</span> Solution: Give the input widget the focus</h3>
<div class="outline-text-3" id="text-21-5">
<div class="org-src-container">
<pre class="src src-javascript"><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Existing code that adds to the list and clears the box.</span></code>
<code></code>
<code>    inputBox.focus();</code>
<code>  });</code>
<code></code>
<code>  document.querySelector(<span style="color: #CC9393;">'input'</span>).addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Existing code that adds to the list</span></code>
<code>  });</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">inputBox</span> = document.getElementById(<span style="color: #CC9393;">'item'</span>);</code>
<code>  inputBox.focus();</code>
<code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
Did your changes look like this?
</p>

<p>
[Wait]
</p>

<p>
We had to add this in two places.
</p>

<p>
The first is in the event listener for the button click. When the user
clicks the button the focus moves to the button, so we have to send
it back to the input widget.
</p>

<p>
We <b>don't</b> have to do it when the user presses ENTER in the input
widget, because the focus doesn't move at that point – it stays
in the widget.
</p>

<p>
I found that when the page is loaded nothing has the focus. So I've
explicitly set the focus to the input widget when the DOM content
had loaded as well.
</p>

<p>
[Questions? Any problems?]
</p>

</div>
</div>
</div>

<div id="outline-container-org6ee55b2" class="outline-3">
<h3 id="org6ee55b2"><span class="section-number-3">21.6</span> Add and commit the changes</h3>
</div>
</div>

<div id="outline-container-orgf6c1fb5" class="outline-2">
<h2 id="orgf6c1fb5"><span class="section-number-2">22</span> A quick refactoring</h2>
<div class="outline-text-2" id="text-22">
<div class="org-src-container">
<pre class="src src-javascript"><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">inputBox</span> = document.getElementById(<span style="color: #CC9393;">'item'</span>);</code>
<code>    document.querySelector(<span style="color: #CC9393;">'ul'</span>).appendChild(createNewListItem(inputBox.value));</code>
<code>    inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<code>    inputBox.focus();</code>
<code>  });</code>
<code></code>
<code>  document.querySelector(<span style="color: #CC9393;">'input'</span>).addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">inputBox</span> = document.getElementById(<span style="color: #CC9393;">'item'</span>);</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key === <span style="color: #CC9393;">'Enter'</span>) {</code>
<code>      document.querySelector(<span style="color: #CC9393;">'ul'</span>).appendChild(createNewListItem(inputBox.value));</code>
<code>      inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<code>    }</code>
<code>  });</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">inputBox</span> = document.getElementById(<span style="color: #CC9393;">'item'</span>);</code>
<code>  inputBox.focus();</code>
<code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
This is my code at this point (just for the event listeners, this
isn't the code that creates the list item).
</p>

<p>
Your code should look similar. I've used method chaining, you might
not have, but the general structure of the code should be the same.
</p>

<p>
I'm going to do a quick refactoring of this.
</p>

<p>
I don't like that the input widget has to be found three different
times. It clutters up the code a bit, and makes it a little harder
to focus on what's going on.
</p>

<p>
And the shopping list also has to found twice, so lets remove that
duplication.
</p>

<p>
It also gives me the chance to explain <b>scope</b> to you, so let's do
that.
</p>

</div>
</div>

<div id="outline-container-org3a15b06" class="outline-3">
<h3 id="org3a15b06"><span class="section-number-3">22.1</span> Refactored: variables at higher scopes</h3>
<div class="outline-text-3" id="text-22-1">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr"> 1: </span><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span> (<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr"> 2: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">inputBox</span> = document.getElementById(<span style="color: #CC9393;">'item'</span>);</code>
<span class="linenr"> 3: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">shoppingList</span> = document.querySelector(<span style="color: #CC9393;">'ul'</span>);</code>
<span class="linenr"> 4: </span><code></code>
<span class="linenr"> 5: </span><code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span> (<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr"> 6: </span><code>    shoppingList.appendChild(createNewListItem(inputBox.value));</code>
<span class="linenr"> 7: </span><code>    inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<span class="linenr"> 8: </span><code>    inputBox.focus();</code>
<span class="linenr"> 9: </span><code>  });</code>
<span class="linenr">10: </span><code></code>
<span class="linenr">11: </span><code>  inputBox.addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span> (<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr">12: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key === <span style="color: #CC9393;">'Enter'</span>) {</code>
<span class="linenr">13: </span><code>      shoppingList.appendChild(createNewListItem(inputBox.value));</code>
<span class="linenr">14: </span><code>      inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<span class="linenr">15: </span><code>    }</code>
<span class="linenr">16: </span><code>  });</code>
<span class="linenr">17: </span><code></code>
<span class="linenr">18: </span><code>  inputBox.focus();</code>
<span class="linenr">19: </span><code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
This is the refactored code.
</p>

<p>
On lines two and three I declare and initialise two variables, one
for the inputBox, one for the shopping list.
</p>

<p>
Then I use these throughout the rest of function.
</p>

<p>
So lets talk about <b>scope</b> for a second.
</p>

<p>
When we declare variables in Javascript we say that they have a
<b>scope</b> (you might also hear the word <b>visibility</b> used).
</p>

<p>
Very roughly, Javascript uses these curly brackets to indicate where
scopes start and end.
</p>

<p>
And because we can have curly bracket sections inside curly bracket
sections, we say that they are nested inside each other.
</p>

<p>
This is very similar to the way that HTML elements are nested inside
one another.
</p>

<p>
You can think of this as creating different <b>levels</b> of scope. Each
new curly bracket pair in the nested set increases the scope level by
one.
</p>

<p>
The rule is that a variable is visible in its scope, and any scopes
that are nested inside it.
</p>

<p>
I'll use this code to explain, and then we'll do a couple more examples.
</p>

<p>
At the very top level is the outermost, or <b>global</b> scope. Anything at
this scope is visible to everything else.
</p>

<p>
In this code example we don't have any variables at the global scope.
</p>

<p>
Line 1 introduces a curly bracket, so we know a new scope has been
created. Let's call this the L1 scope.
</p>

<p>
We define two variables in the L1 scope.
</p>

<p>
Line 5 uses the <code>inputBox</code> variable. We're in L2 scope and the
variable was defined in L1, so this is fine.
</p>

<p>
Line 5 also introduces a curly bracket, so everything from there on in
is at L2 scope.
</p>

<p>
Line 6 has another one – the if() body – so L3 scope starts there.
That uses <code>shoppingList</code> and <code>inputBox</code>, both L1 scope, so visible.
</p>

<p>
Line 9 has a closing curly brace, so we jump up one scope level, and
we're back to L2 scope.
</p>

<p>
On line 11 I can use the <code>inputBox</code> variable instead of calling
<code>querySelector</code> again.
</p>

<p>
Lines 13 through 18 are very similar. Importantly, when the L2 scope
is created in line 13, and the L3 scope in line 14, these are
<b>different</b> from the L2 and L3 scopes from earlier
</p>

<p>
This is one of the reasons why we're careful to indent code – the
indentation also helps to show the scopes, and prevent mistakes.
</p>

</div>
</div>
</div>

<div id="outline-container-org62ddec5" class="outline-3">
<h3 id="org62ddec5"><span class="section-number-3">22.2</span> Refactored: variables at higher scopes</h3>
<div class="outline-text-3" id="text-22-2">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr"> 1: </span><code>&lt;script&gt;</code>
<span class="linenr"> 2: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">a</span> = <span style="color: #CC9393;">'[a:g]'</span>;              <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">&lt;-- global scope</span></code>
<span class="linenr"> 3: </span><code></code>
<span class="linenr"> 4: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">scope</span>() {            <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">&lt;-- L1 scope starts</span></code>
<span class="linenr"> 5: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">b</span> = <span style="color: #CC9393;">'[b:1]'</span>;            <span style="color: #5F7F5F;">//     </span><span style="color: #7F9F7F;">visible in L1 and below</span></code>
<span class="linenr"> 6: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">c</span> = <span style="color: #CC9393;">'[c:1]'</span>;            <span style="color: #5F7F5F;">//     </span><span style="color: #7F9F7F;">visible in L1 and below</span></code>
<span class="linenr"> 7: </span><code>    console.log(<span style="color: #CC9393;">`${a} ${b} ${c}`</span>); <span style="color: #5F7F5F;">//  </span><span style="color: #7F9F7F;">"[a:g] [b:1] [c:1]"</span></code>
<span class="linenr"> 8: </span><code></code>
<span class="linenr"> 9: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (<span style="color: #BFEBBF;">true</span>) {                 <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">&lt;-- L2 scope starts</span></code>
<span class="linenr">10: </span><code>      <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">c</span> = <span style="color: #CC9393;">'[c:2]'</span>;          <span style="color: #5F7F5F;">//     </span><span style="color: #7F9F7F;">This is a *different* c</span></code>
<span class="linenr">11: </span><code>      console.log(<span style="color: #CC9393;">`${b} ${c}`</span>); <span style="color: #5F7F5F;">//     </span><span style="color: #7F9F7F;">"[b:1] [c:2]"</span></code>
<span class="linenr">12: </span><code>    }                           <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">&lt;-- L2 scope ends, back to L1</span></code>
<span class="linenr">13: </span><code></code>
<span class="linenr">14: </span><code>    console.log(<span style="color: #CC9393;">`${b} ${c}`</span>);   <span style="color: #5F7F5F;">//     </span><span style="color: #7F9F7F;">"[b:1] [c:1]"</span></code>
<span class="linenr">15: </span><code>  }                             <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">&lt;-- L1 scope ends, back to global</span></code>
<span class="linenr">16: </span><code>  scope();</code>
<span class="linenr">17: </span><code>  console.log(b);               <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Error: b is not defined</span></code>
<span class="linenr">18: </span><code>&lt;/script&gt;</code>
</pre>
</div>

<div class="NOTES">
<p>
Here's a somewhat contrived example that maybe helps.
</p>

<p>
In our script element we start in global scope. That's where
the <code>a</code> variable is defined, so it's in global scope.
</p>

<p>
Our <code>scope</code> function creates an L1 scope. The <code>b</code> and <code>c</code>
variables are in this scope.
</p>

<p>
The <code>if</code> statement creates an L2 scope. Crucially, inside
this scope we create a new <code>c</code> variable. This means that that
<code>c</code> variable from line 6 is temporarily hidden, and replaced with
this new <code>c</code> variable.
</p>

<p>
We exit the L2 scope on line 12, back to the L1 scope.
</p>

<p>
The log on line 14 shows the <b>original</b> version of <code>c</code>, not the
one from line 10.
</p>

<p>
Finally, the log statement on line 17 generates an error. We're
back in global scope here, and <code>b</code> was defined in an L1 scope,
so it's not visible.
</p>

<p>
Is that – somewhat – clear?
</p>

</div>
</div>
</div>

<div id="outline-container-orgd317c09" class="outline-3">
<h3 id="orgd317c09"><span class="section-number-3">22.3</span> Quick note on the backticks, <code>`</code></h3>
<div class="outline-text-3" id="text-22-3">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">a</span> = <span style="color: #CC9393;">'[a:g]'</span>;</code>
<code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">b</span> = <span style="color: #CC9393;">'[b:1]'</span>;</code>
<code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">c</span> = <span style="color: #CC9393;">'[c:1]'</span>;</code>
<code></code>
<code>console.log(a + <span style="color: #CC9393;">' '</span> + b + <span style="color: #CC9393;">' '</span> + c); <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">"[a:g] [b:1] [c:1]"</span></code>
<code>console.log(<span style="color: #CC9393;">`${a} ${b} ${c}`</span>);      <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">"[a:g] [b:1] [c:1]"</span></code>
</pre>
</div>

<div class="NOTES">
<p>
When you want to include a variable's value in a string we've
been doing string concatenation with the plus sign, as in the first
example.
</p>

<p>
If you use backticks, as in the second example, you can put the
value of the variable in the string by using this syntax with a
dollar sign, an opening curly, the name of the variabe, and a
closign curly.
</p>

<p>
As you can see, it can be quite a bit easier to read.
</p>

</div>
</div>
</div>
</div>

<div id="outline-container-org872e263" class="outline-2">
<h2 id="org872e263"><span class="section-number-2">23</span> Prevent empty items from being added</h2>
<div class="outline-text-2" id="text-23">
<ul class="org-ul">
<li>Pressing Enter or clicking the button adds an item
<ul class="org-ul">
<li>Even if it's the empty string</li>
</ul></li>
</ul>

<div class="NOTES">
<p>
Now that we're refactored the code slightly lets move on to the
next problem – prevening empty items from being added.
</p>

<p>
This is the current problem.
</p>

<p>
How should we solve it?
</p>

<p>
[Wait]
</p>

</div>
</div>

<div id="outline-container-org9d67e3d" class="outline-3">
<h3 id="org9d67e3d"><span class="section-number-3">23.1</span> Rules</h3>
<div class="outline-text-3" id="text-23-1">
<ul class="org-ul">
<li>If the input widget is empty
<ul class="org-ul">
<li>Pressing <code>Enter</code> in the input widget should do nothing</li>
<li>The button should be disabled / clicks ignored</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org50dfb14" class="outline-3">
<h3 id="org50dfb14"><span class="section-number-3">23.2</span> Multiple parts to this problem</h3>
<div class="outline-text-3" id="text-23-2">
<ul class="org-ul">
<li>How do we say that input is required?</li>
<li>How do we disable the button?</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org69f2254" class="outline-2">
<h2 id="org69f2254"><span class="section-number-2">24</span> Using <code>if</code> to require input</h2>
<div class="outline-text-2" id="text-24">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr"> 1: </span><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span> (<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr"> 2: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">inputBox</span> = document.getElementById(<span style="color: #CC9393;">'item'</span>);</code>
<span class="linenr"> 3: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">shoppingList</span> = document.querySelector(<span style="color: #CC9393;">'ul'</span>);</code>
<span class="linenr"> 4: </span><code></code>
<span class="linenr"> 5: </span><code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span> (<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr"> 6: </span><code>    shoppingList.appendChild(createNewListItem(inputBox.value));</code>
<span class="linenr"> 7: </span><code>    inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<span class="linenr"> 8: </span><code>    inputBox.focus();</code>
<span class="linenr"> 9: </span><code>  });</code>
<span class="linenr">10: </span><code></code>
<span class="linenr">11: </span><code>  inputBox.addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span> (<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr">12: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key === <span style="color: #CC9393;">'Enter'</span>) {</code>
<span class="linenr">13: </span><code>      shoppingList.appendChild(createNewListItem(inputBox.value));</code>
<span class="linenr">14: </span><code>      inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<span class="linenr">15: </span><code>    }</code>
<span class="linenr">16: </span><code>  });</code>
<span class="linenr">17: </span><code></code>
<span class="linenr">18: </span><code>  inputBox.focus();</code>
<span class="linenr">19: </span><code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
Here's our code again.
</p>

<p>
We already use an <code>if</code> statement here (line 12) to check to see
if the value of the <code>event.key</code> property is correct.
</p>

<p>
How can we use extra <code>if</code> statements to see if the <code>inputBox</code>
<code>value</code> is not the empty string?
</p>

<p>
[Wait]
</p>

</div>
</div>

<div id="outline-container-org08d63a2" class="outline-3">
<h3 id="org08d63a2"><span class="section-number-3">24.1</span> (hint) Which comparison operator to use?</h3>
<div class="outline-text-3" id="text-24-1">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">c</span> = <span style="color: #CC9393;">'This is a string'</span>;</code>
<code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">d</span> = <span style="color: #CC9393;">'This is also a string'</span>;</code>
<code></code>
<code>c === d;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">false, === means "is equal to?"</span></code>
<code>c !== d;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">true,  !== means "is not equal to?"</span></code>
<code>c &lt;   d;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">true,  &lt;   means "is less than?"</span></code>
<code>c &gt;   d;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">false, &gt;   means "is greater than?"</span></code>
<code>c &lt;=  d;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">true,  &lt;=  means "is less than or equal to?"</span></code>
<code>c &gt;=  d;   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">false, &gt;=  means "is greater than or equal to?"</span></code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5c681cd" class="outline-3">
<h3 id="org5c681cd"><span class="section-number-3">24.2</span> Solution: Using <code>if</code> to require input</h3>
<div class="outline-text-3" id="text-24-2">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">if</span> (inputBox.value !== <span style="color: #CC9393;">''</span>) {</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Code to add the listitem goes here</span></code>
<code>}</code>
</pre>
</div>

<div class="NOTES">
<p>
We can wrap our code in this <code>if</code> statement. The code inside the
body of the <code>if</code> will only run if <code>inputBox.value</code> is not the empty
string.
</p>

<p>
If you haven't already done that, do that, and make sure it works.
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>

<div id="outline-container-org73fb96b" class="outline-3">
<h3 id="org73fb96b"><span class="section-number-3">24.3</span> Solution: Using <code>if</code> to require input</h3>
<div class="outline-text-3" id="text-24-3">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr"> 1: </span><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr"> 2: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">inputBox</span> = document.getElementById(<span style="color: #CC9393;">'item'</span>);</code>
<span class="linenr"> 3: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">shoppingList</span> = document.querySelector(<span style="color: #CC9393;">'ul'</span>);</code>
<span class="linenr"> 4: </span><code></code>
<span class="linenr"> 5: </span><code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr"> 6: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (inputBox.value !== <span style="color: #CC9393;">''</span>) {</code>
<span class="linenr"> 7: </span><code>      shoppingList.appendChild(createNewListItem(inputBox.value));</code>
<span class="linenr"> 8: </span><code>      inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<span class="linenr"> 9: </span><code>    }</code>
<span class="linenr">10: </span><code>    inputBox.focus();</code>
<span class="linenr">11: </span><code>  });</code>
<span class="linenr">12: </span><code></code>
<span class="linenr">13: </span><code>  inputBox.addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr">14: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (inputBox.value !== <span style="color: #CC9393;">''</span>) {</code>
<span class="linenr">15: </span><code>      <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key === <span style="color: #CC9393;">'Enter'</span>) {</code>
<span class="linenr">16: </span><code>        shoppingList.appendChild(createNewListItem(inputBox.value));</code>
<span class="linenr">17: </span><code>        inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<span class="linenr">18: </span><code>      }</code>
<span class="linenr">19: </span><code>    }</code>
<span class="linenr">20: </span><code>  });</code>
<span class="linenr">21: </span><code></code>
<span class="linenr">22: </span><code>  inputBox.focus();</code>
<span class="linenr">23: </span><code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
Here's the new code, with the additional <code>if</code> statements starting
on line 6 and 14.
</p>

<p>
Everyone OK with this change? It makes sense?
</p>

<p>
[Wait]
</p>

<p>
OK, so add this change to your file, and commit as normal.
</p>

<p>
[Wait]
</p>

<p>
Now that we've done that, there's a problem with this code.
Can anyone tell me what it is?
</p>

</div>
</div>
</div>

<div id="outline-container-org763cf36" class="outline-3">
<h3 id="org763cf36"><span class="section-number-3">24.4</span> Problem: Only looks at empty strings</h3>
<div class="outline-text-3" id="text-24-4">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">if</span> (inputBox.value !== <span style="color: #CC9393;">''</span>) {</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Code goes here</span></code>
<code>}</code>
</pre>
</div>

<ul class="org-ul">
<li>Only looks at completely empty strings</li>
<li>What if the user has typed in one space?</li>
<li>Or three spaces? Or 15?</li>
</ul>

<div class="NOTES">
<p>
This is a very specific check – it only looks to see if the string
is completely empty.
</p>

<p>
If the user has typed in a space, or lots of spaces, the string
will no longer be empty.
</p>

<p>
So the test will pass and the user will have entered what looks like
an empty shopping list item. We'll know it's not really empty, but
it still looks like a problem to them.
</p>

<p>
So we'll have to fix that.
</p>

</div>
</div>
</div>

<div id="outline-container-org56658b0" class="outline-3">
<h3 id="org56658b0"><span class="section-number-3">24.5</span> Dealing with whitespace</h3>
<div class="outline-text-3" id="text-24-5">
<ul class="org-ul">
<li>[<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">MDN string</a>]</li>
<li>Review the available string methods</li>
<li>Are there any that deal with whitespace?</li>
</ul>

<div class="NOTES">
<p>
Lets see if we can figure out how to deal with this.
</p>

<p>
Find the MDN documentation for strings by doing this search.
</p>

<p>
On that page you'll see long section called "Methods". Review that
section, looking for methods that deal with whitespace.
</p>

<p>
Are there any methods that would let us deal with potential whitespace
in the string?
</p>

</div>
</div>
</div>

<div id="outline-container-org7828a57" class="outline-3">
<h3 id="org7828a57"><span class="section-number-3">24.6</span> The <code>trim</code> method</h3>
<div class="outline-text-3" id="text-24-6">
<blockquote>
<p>
Trims whitespace from the beginning and end of the string.
</p>
</blockquote>

<div class="NOTES">
<p>
In case it's not clear, 'trim' means remove.
</p>

<p>
So this takes the string, and removes any whitespace that appears
at the beginning or end of the string
</p>

<p>
On the general string page is a link to the more detailed page for
the <code>trim</code> method. Follow that link (the top of the page should say
"String.prototype.trim()". There you'll see some more examples and
a console you can play around with.
</p>

<p>
Use that to get familiar with the method, then figure out what we
should change in our code to use it to make the check work properly.
</p>

<p>
Make that change to your code, and check that empty items aren't being
added to the list any more.
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>

<div id="outline-container-orgc2b16ec" class="outline-3">
<h3 id="orgc2b16ec"><span class="section-number-3">24.7</span> Solution: Using <code>if</code> and <code>trim</code> to require input</h3>
<div class="outline-text-3" id="text-24-7">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr"> 1: </span><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr"> 2: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">inputBox</span> = document.getElementById(<span style="color: #CC9393;">'item'</span>);</code>
<span class="linenr"> 3: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">shoppingList</span> = document.querySelector(<span style="color: #CC9393;">'ul'</span>);</code>
<span class="linenr"> 4: </span><code></code>
<span class="linenr"> 5: </span><code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr"> 6: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (inputBox.value.trim() !== <span style="color: #CC9393;">''</span>) {</code>
<span class="linenr"> 7: </span><code>      shoppingList.appendChild(createNewListItem(inputBox.value.trim()));</code>
<span class="linenr"> 8: </span><code>      inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<span class="linenr"> 9: </span><code>    }</code>
<span class="linenr">10: </span><code>    inputBox.focus();</code>
<span class="linenr">11: </span><code>  });</code>
<span class="linenr">12: </span><code></code>
<span class="linenr">13: </span><code>  inputBox.addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr">14: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (inputBox.value.trim() !== <span style="color: #CC9393;">''</span>) {</code>
<span class="linenr">15: </span><code>      <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key === <span style="color: #CC9393;">'Enter'</span>) {</code>
<span class="linenr">16: </span><code>        shoppingList.appendChild(createNewListItem(inputBox.value.trim()));</code>
<span class="linenr">17: </span><code>        inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<span class="linenr">18: </span><code>      }</code>
<span class="linenr">19: </span><code>    }</code>
<span class="linenr">20: </span><code>  });</code>
<span class="linenr">21: </span><code></code>
<span class="linenr">22: </span><code>  inputBox.focus();</code>
<span class="linenr">23: </span><code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
Here's what I came up with.
</p>

<p>
I use <code>trim()</code> in both of the <code>if</code> expressions so that the input
string is trimmed of all whitespace.
</p>

<p>
That's here on line 6 and on line 14.
</p>

<p>
But I also make sure that the input is trimmed when it's added to
the list, here on line 7 and on line 16. That's probably worth a
refactor later, but it will do for the moment.
</p>

<p>
Everyone OK with this so far?
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>

<div id="outline-container-org09a908f" class="outline-3">
<h3 id="org09a908f"><span class="section-number-3">24.8</span> Add and commit the changes</h3>
</div>
</div>

<div id="outline-container-org4a713ae" class="outline-2">
<h2 id="org4a713ae"><span class="section-number-2">25</span> Disabling the button</h2>
<div class="outline-text-2" id="text-25">
<ul class="org-ul">
<li>[<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button">MDN button disable</a>]</li>
</ul>

<div class="NOTES">
<p>
With this change in place pressing the Enter key or clicking the
button won't do anything while the input box is empty or only
contains whitespace.
</p>

<p>
This is good, but we can go a step further.
</p>

<p>
At the moment the button still looks active when there's nothing
that can be added.
</p>

<p>
This is a visual clue to the user the button can be clicked, so
they're going to be surprised when clicking the button does
nothing.
</p>

<p>
You know the drill by now – go and look for an MDN article that
mentions <code>button</code> and <code>disable</code>, and see if you can figure out
how to mark a button as being disabled.
</p>

<p>
[Wait]
</p>

</div>
</div>

<div id="outline-container-orge6b9fbb" class="outline-3">
<h3 id="orge6b9fbb"><span class="section-number-3">25.1</span> Solution: Disabling the button</h3>
<div class="outline-text-3" id="text-25-1">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">button</span> = document.querySelector(<span style="color: #CC9393;">'button'</span>);</code>
<code>button.disabled = <span style="color: #BFEBBF;">true</span>;  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Disable the button</span></code>
<code>button.disabled = <span style="color: #BFEBBF;">false</span>; <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Enable the button</span></code>
</pre>
</div>

<div class="NOTES">
<p>
Buttons have a <code>disabled</code> value that can be set. When it's
<code>true</code> the button appears to be disabled.
</p>

<p>
When it's set to <code>false</code> the button is enabled again.
</p>

<p>
Load your shopping list page in to the browser, and open the console.
</p>

<p>
Try these commands. Notice what happens visually to the button when
you disable it. Try clicking on it when it's disabled and see what
it does.
</p>

<p>
Then enable it, watch the visuals change, and try clicking on it
again.
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>

<div id="outline-container-org7f131ae" class="outline-3">
<h3 id="org7f131ae"><span class="section-number-3">25.2</span> Where should we put this code?</h3>
<div class="outline-text-3" id="text-25-2">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr"> 1: </span><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr"> 2: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">inputBox</span> = document.getElementById(<span style="color: #CC9393;">'item'</span>);</code>
<span class="linenr"> 3: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">shoppingList</span> = document.querySelector(<span style="color: #CC9393;">'ul'</span>);</code>
<span class="linenr"> 4: </span><code></code>
<span class="linenr"> 5: </span><code>  document.querySelector(<span style="color: #CC9393;">'button'</span>).addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr"> 6: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (inputBox.value.trim() !== <span style="color: #CC9393;">''</span>) {</code>
<span class="linenr"> 7: </span><code>      shoppingList.appendChild(createNewListItem(inputBox.value.trim()));</code>
<span class="linenr"> 8: </span><code>      inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<span class="linenr"> 9: </span><code>    }</code>
<span class="linenr">10: </span><code>    inputBox.focus();</code>
<span class="linenr">11: </span><code>  });</code>
<span class="linenr">12: </span><code></code>
<span class="linenr">13: </span><code>  inputBox.addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr">14: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (inputBox.value.trim() !== <span style="color: #CC9393;">''</span>) {</code>
<span class="linenr">15: </span><code>      <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key === <span style="color: #CC9393;">'Enter'</span>) {</code>
<span class="linenr">16: </span><code>        shoppingList.appendChild(createNewListItem(inputBox.value.trim()));</code>
<span class="linenr">17: </span><code>        inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<span class="linenr">18: </span><code>      }</code>
<span class="linenr">19: </span><code>    }</code>
<span class="linenr">20: </span><code>  });</code>
<span class="linenr">21: </span><code></code>
<span class="linenr">22: </span><code>  inputBox.focus();</code>
<span class="linenr">23: </span><code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
Now that we know how to disable the button, we need to think about
where the code should go.
</p>

<p>
Here's my current code again. Where in this should we put the code
that's going to control if the button is enabled or disabled?
</p>

<p>
[Wait]
</p>

<p>
We need to control the button's visibility every time the user
presses a key.
</p>

<p>
There are two possibilities – either the input is empty, or its
not.
</p>

<p>
If it's empty we should disable the button, and if it's not empty
we should enable the button.
</p>

<p>
We already have one <code>if</code> block for if the input is not empty. So
we can add new code there.
</p>

<p>
We'll need another <code>if</code> block for the case where the input is not
empty.
</p>

<p>
And we need to find the button.
</p>

<p>
So go ahead and add code here, immediately after my line 14 that
enables the button.
</p>

<p>
And add another <code>if</code> statement after line 19 that disables the
button if the input is empty.
</p>

<p>
And you'll need a variable for the button.
</p>

</div>
</div>
</div>

<div id="outline-container-org6c4c140" class="outline-3">
<h3 id="org6c4c140"><span class="section-number-3">25.3</span> Solution: Disabling the button, variables</h3>
<div class="outline-text-3" id="text-25-3">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr">26: </span><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr">27: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">inputBox</span> = document.getElementById(<span style="color: #CC9393;">'item'</span>);</code>
<span class="linenr">28: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">shoppingList</span> = document.querySelector(<span style="color: #CC9393;">'ul'</span>);</code>
<span class="linenr">29: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">addItemButton</span> = document.querySelector(<span style="color: #CC9393;">'button'</span>);</code>
</pre>
</div>

<div class="NOTES">
<p>
I've had to split the code over three slides to show it all.
</p>

<p>
The first part is the top of the <code>DOMContentLoaded</code> listener.
</p>

<p>
All I've done here is added a third variable, <code>addItemButton</code>,
and found the first button in the DOM.
</p>

<p>
Make sense?
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>

<div id="outline-container-orgd202f79" class="outline-3">
<h3 id="orgd202f79"><span class="section-number-3">25.4</span> Solution: Disabling the button, input widget</h3>
<div class="outline-text-3" id="text-25-4">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr">40: </span><code>  inputBox.addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr">41: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (inputBox.value.trim() !== <span style="color: #CC9393;">''</span>) {</code>
<span class="linenr">42: </span><code>      addItemButton.disabled = <span style="color: #BFEBBF;">false</span>;</code>
<span class="linenr">43: </span><code>      <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key === <span style="color: #CC9393;">'Enter'</span>) {</code>
<span class="linenr">44: </span><code>        shoppingList.appendChild(createNewListItem(inputBox.value.trim()));</code>
<span class="linenr">45: </span><code>        inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<span class="linenr">46: </span><code>      }</code>
<span class="linenr">47: </span><code>    }</code>
<span class="linenr">48: </span><code></code>
<span class="linenr">49: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (inputBox.value.trim() === <span style="color: #CC9393;">''</span>) {</code>
<span class="linenr">50: </span><code>      addItemButton.disabled = <span style="color: #BFEBBF;">true</span>;</code>
<span class="linenr">51: </span><code>    }</code>
<span class="linenr">52: </span><code>  });</code>
<span class="linenr">53: </span><code></code>
<span class="linenr">54: </span><code>  inputBox.focus();</code>
<span class="linenr">55: </span><code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
Jumping ahead to my line 40, and the <code>keyup</code> listener for the input
widget I've made two changes.
</p>

<p>
The first is line 3 of this code. The <code>if</code> statement immediately
before means that this code will only run if the input widget is
<b>not</b> empty.
</p>

<p>
So we know that the button should be enabled here. And to enable
the button you set its <code>disabled</code> property to <code>false</code>.
</p>

<p>
The second change is lines 10-12. We need to deal with the case
where the input box <b>is</b> empty, so I have a second <code>if</code> statement
here to deal with that.
</p>

<p>
Those of you with more programming experience are probably wondering
why I didn't use an <code>else</code> clause here. I'm coming to that in a bit,
don't worry.
</p>

</div>
</div>
</div>

<div id="outline-container-orgd623430" class="outline-3">
<h3 id="orgd623430"><span class="section-number-3">25.5</span> Solution: Disabling the button, button widget</h3>
<div class="outline-text-3" id="text-25-5">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr">31: </span><code>addItemButton.addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr">32: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (inputBox.value.trim() !== <span style="color: #CC9393;">''</span>) {</code>
<span class="linenr">33: </span><code>    shoppingList.appendChild(createNewListItem(inputBox.value.trim()));</code>
<span class="linenr">34: </span><code>    inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<span class="linenr">35: </span><code>    addItemButton.disabled = <span style="color: #BFEBBF;">true</span>;</code>
<span class="linenr">36: </span><code>  }</code>
<span class="linenr">37: </span><code>  inputBox.focus();</code>
<span class="linenr">38: </span><code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
Finally, and jumping back up the code, I've been a bit sneaky.
</p>

<p>
Earlier, I didn't tell you that when the button is clicked to add
an item to the list it should disable itself. This is because
one of the things the button does when it's clicked is empty
out the input wideget (here, on line 34).
</p>

<p>
But there's no <code>keyup</code> event fired when that happens, so the
button has to know to disable itself.
</p>

<p>
Do you have this bug in your code? Does your button disable itself
after it's clicked?
</p>

<p>
[Wait]
</p>

<p>
Fix your code so that it disables the button in all cases, then
add and commit your changes.
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>
</div>

<div id="outline-container-org3937861" class="outline-2">
<h2 id="org3937861"><span class="section-number-2">26</span> Recap: What have we learned</h2>
<div class="outline-text-2" id="text-26">
<ul class="org-ul">
<li><code>.focus()</code> method</li>
<li>Variable scopes</li>
<li>Strings with backticks <code>`</code></li>
<li>String methods
<ul class="org-ul">
<li><code>.trim()</code></li>
</ul></li>
<li><code>.disabled</code> property</li>
</ul>
</div>
</div>

<div id="outline-container-orge956572" class="outline-2">
<h2 id="orge956572"><span class="section-number-2">27</span> Refactoring: <code>const</code></h2>
<div class="outline-text-2" id="text-27">
<div class="NOTES">
<p>
I mentioned that I wanted to refactor this code, and there are a
few things I want to do and introduce you to.
</p>

</div>
</div>

<div id="outline-container-org44da2cd" class="outline-3">
<h3 id="org44da2cd"><span class="section-number-3">27.1</span> Recap: <code>let</code></h3>
<div class="outline-text-3" id="text-27-1">
<ul class="org-ul">
<li><code>let</code> declares a variable with a value that can change</li>
</ul>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">a</span> = 10;</code>
<code>a;            <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">10</span></code>
<code>a = 20;</code>
<code>a;            <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">20</span></code>
<code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">b</span>;        <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Variable without initial value</span></code>
<code>b;            <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">undefined</span></code>
<code>b = 30;</code>
<code>b;            <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">30</span></code>
</pre>
</div>

<div class="NOTES">
<p>
We're familiar with the <code>let</code> keyword.
</p>

<p>
We use it to declare a variable, and optionally give it a value.
</p>

<p>
We can later change the value in the variable, and use the new
value.
</p>

<p>
We can also declare a variable that starts out with the
<code>undefined</code> value, and then give it a value later.
</p>

<p>
This is great when the value might legitimately change in the
future.
</p>

<p>
But what do you do if you know the value should never change?
</p>

</div>
</div>
</div>

<div id="outline-container-org5064465" class="outline-3">
<h3 id="org5064465"><span class="section-number-3">27.2</span> Introducing <code>const</code></h3>
<div class="outline-text-3" id="text-27-2">
<ul class="org-ul">
<li><code>const</code> declares a variable with a value that can't change
<ul class="org-ul">
<li>We call this a <b>constant</b></li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">c</span> = 15;</code>
<code>c;            <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">15;</span></code>
<code>c = 20;       <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Uncaught TypeError: Assignment to constant</span></code>
<code>              <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">variable.</span></code>
<code></code>
<code><span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">d</span>;      <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Uncaught SyntaxError: Missing initializer</span></code>
<code>              <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">in const declaration.</span></code>
</pre>
</div>

<div class="NOTES">
<p>
When we know that the value should never change we should use the
<code>const</code> keyword instead.
</p>

<p>
This does a couple of useful things.
</p>

<p>
First, if the value shouldn't change, and you have a bug in the code
that tries to change the value then Javascript will tell you when that
code runs.
</p>

<p>
This is much better than if the code silently succeeded by mistake.
</p>

<p>
Second, it helps communicate your intent to the next programmer
that comes along. Now they know that this variable is not supposed
to change in value.
</p>

<p>
Third, it allows other tools to spot problems even before the code
runs. WebStorm, for example, will analyse the code and tell you
that you've tried to assign a value to a constant variable as you
are writing the code, which is very helpful in preventing bugs in
the first place.
</p>

</div>
</div>
</div>

<div id="outline-container-org113f650" class="outline-3">
<h3 id="org113f650"><span class="section-number-3">27.3</span> Replacing <code>let</code> with <code>const</code></h3>
<div class="outline-text-3" id="text-27-3">
<ul class="org-ul">
<li><code>Edit</code> &gt; <code>Find</code> &gt; <code>Replace...</code></li>
<li>Replace <code>let</code> with <code>const</code></li>
</ul>
</div>

<div id="outline-container-org6a4f379" class="outline-4">
<h4 id="org6a4f379"><span class="section-number-4">27.3.1</span> Replacing <code>let</code> with <code>const</code></h4>
<div class="outline-text-4" id="text-27-3-1">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">createNewListItem</span>(<span style="color: #DFAF8F;">itemName</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">listItem</span> = document.createElement(<span style="color: #CC9393;">'li'</span>);</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">listText</span> = document.createElement(<span style="color: #CC9393;">'span'</span>);</code>
<code>  listText.textContent = itemName;</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">deleteButton</span> = document.createElement(<span style="color: #CC9393;">'button'</span>);</code>
<code>  deleteButton.textContent = <span style="color: #CC9393;">'Delete'</span>;</code>
<code></code>
<code>  deleteButton.addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    listItem.remove();</code>
<code>  });</code>
<code></code>
<code>  listItem.appendChild(listText);</code>
<code>  listItem.appendChild(deleteButton);</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">return</span> listItem;</code>
<code>}</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8ff8b56" class="outline-4">
<h4 id="org8ff8b56"><span class="section-number-4">27.3.2</span> Replacing <code>let</code> with <code>const</code></h4>
<div class="outline-text-4" id="text-27-3-2">
<div class="org-src-container">
<pre class="src src-javascript"><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">inputBox</span> = document.getElementById(<span style="color: #CC9393;">'item'</span>);</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">shoppingList</span> = document.querySelector(<span style="color: #CC9393;">'ul'</span>);</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">addItemButton</span> = document.querySelector(<span style="color: #CC9393;">'button'</span>);</code>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org37ebfae" class="outline-2">
<h2 id="org37ebfae"><span class="section-number-2">28</span> Refactoring: <code>else</code></h2>
<div class="outline-text-2" id="text-28">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">if</span> (expression) {</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Body of the if-statement</span></code>
<code>}</code>
</pre>
</div>

<div class="NOTES">
<p>
This is the <code>if</code> statement that we've been using so far. We
have the <code>if</code> keyword, an expression in parentheses, and then
the body surrounded by curly brackets.
</p>

<p>
The code in the body is only executed if the expression is true.
</p>

<p>
But what if we want to do something else if the expression is false?
</p>

</div>
</div>

<div id="outline-container-org944144e" class="outline-3">
<h3 id="org944144e"><span class="section-number-3">28.1</span> The <code>else</code> keyword</h3>
<div class="outline-text-3" id="text-28-1">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">if</span> (expression) {</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Code run if expression is true</span></code>
<code>} <span style="color: #F0DFAF; font-weight: bold;">else</span> {</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Code run if expression is false</span></code>
<code>}</code>
</pre>
</div>

<div class="NOTES">
<p>
We can use the <code>else</code> keyword. This starts immediately after the
closing curly bracket of the <code>if</code> statement, and is the keyword,
followed by its own curly brackets, with the code to be run
inside them.
</p>

<p>
Does this make sense to everyone?
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>

<div id="outline-container-org14248b4" class="outline-3">
<h3 id="org14248b4"><span class="section-number-3">28.2</span> Exercise: Using the <code>else</code> keyword</h3>
<div class="outline-text-3" id="text-28-2">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr">1: </span><code><span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">elseTest</span>(<span style="color: #DFAF8F;">num</span>) {</code>
<span class="linenr">2: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (num &lt; 10) {</code>
<span class="linenr">3: </span><code>    console.log(<span style="color: #CC9393;">'less than 10'</span>);</code>
<span class="linenr">4: </span><code>  } <span style="color: #F0DFAF; font-weight: bold;">else</span> {</code>
<span class="linenr">5: </span><code>    console.log(<span style="color: #CC9393;">'bigger than 10'</span>);</code>
<span class="linenr">6: </span><code>  }</code>
<span class="linenr">7: </span><code>}</code>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-javascript"><code>elseTest(9);</code>
<code>elseTest(11);</code>
</pre>
</div>

<div class="NOTES">
<p>
Try this exercise. In the Chrome console type this function, and
then test it with these two arguments.
</p>

<p>
What's printed?
</p>

<p>
[Wait]
</p>

</div>
</div>

<div id="outline-container-orgd2acb3a" class="outline-4">
<h4 id="orgd2acb3a"><span class="section-number-4">28.2.1</span> Exercise: Using the <code>else</code> keyword</h4>
<div class="outline-text-4" id="text-28-2-1">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr">1: </span><code><span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">elseTest</span>(<span style="color: #DFAF8F;">num</span>) {</code>
<span class="linenr">2: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (num &lt; 10) {</code>
<span class="linenr">3: </span><code>    console.log(<span style="color: #CC9393;">'less than 10'</span>);</code>
<span class="linenr">4: </span><code>  } <span style="color: #F0DFAF; font-weight: bold;">else</span> {</code>
<span class="linenr">5: </span><code>    console.log(<span style="color: #CC9393;">'bigger than 10'</span>);</code>
<span class="linenr">6: </span><code>  }</code>
<span class="linenr">7: </span><code>}</code>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-javascript"><code>elseTest(9);</code>
<code>elseTest(11);</code>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-javascript"><code>elseTest(10);</code>
</pre>
</div>

<div class="NOTES">
<p>
Now try it with <code>10</code> as the argument.
</p>

<p>
What's printed?
</p>

<p>
[Wait]
</p>

<p>
Do you see why?
</p>

<p>
[Wait]
</p>

<p>
There are three possible answers to this question, but we've only
covered two of them.
</p>

</div>
</div>
</div>

<div id="outline-container-orgbd2199b" class="outline-4">
<h4 id="orgbd2199b"><span class="section-number-4">28.2.2</span> Exercise: Using the <code>else</code> keyword</h4>
<div class="outline-text-4" id="text-28-2-2">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr">1: </span><code><span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">elseTest</span>(<span style="color: #DFAF8F;">num</span>) {</code>
<span class="linenr">2: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (num &lt; 10) {</code>
<span class="linenr">3: </span><code>    console.log(<span style="color: #CC9393;">'less than 10'</span>);</code>
<span class="linenr">4: </span><code>  } <span style="color: #F0DFAF; font-weight: bold;">else</span> <span style="color: #F0DFAF; font-weight: bold;">if</span> (num &gt; 10) {</code>
<span class="linenr">5: </span><code>    console.log(<span style="color: #CC9393;">'bigger than 10'</span>);</code>
<span class="linenr">6: </span><code>  } <span style="color: #F0DFAF; font-weight: bold;">else</span> {</code>
<span class="linenr">7: </span><code>    console.log(<span style="color: #CC9393;">'same as 10'</span>);</code>
<span class="linenr">8: </span><code>  }</code>
<span class="linenr">9: </span><code>}</code>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-javascript"><code>elseTest(9);</code>
<code>elseTest(11);</code>
<code>elseTest(10);</code>
</pre>
</div>

<div class="NOTES">
<p>
We can have a chain of if/else clauses that test various things
</p>

<p>
Look at the syntax on line 4 – as well as the <code>else</code> keyword we have
a new <code>if</code> statement that checks to see if the number is larger than
</p>
<ol class="org-ol">
<li>Finally, on line 6 we have a final <code>else</code> that covers all the</li>
</ol>
<p>
other cases.
</p>

<p>
Try this.
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>
</div>

<div id="outline-container-orgac2c89e" class="outline-3">
<h3 id="orgac2c89e"><span class="section-number-3">28.3</span> Exercise: Refactoring with the <code>else</code> keyword</h3>
<div class="outline-text-3" id="text-28-3">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr">40: </span><code>inputBox.addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr">41: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (inputBox.value.trim() !== <span style="color: #CC9393;">''</span>) {</code>
<span class="linenr">42: </span><code>    addItemButton.disabled = <span style="color: #BFEBBF;">false</span>;</code>
<span class="linenr">43: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key === <span style="color: #CC9393;">'Enter'</span>) {</code>
<span class="linenr">44: </span><code>      shoppingList.appendChild(createNewListItem(inputBox.value.trim()));</code>
<span class="linenr">45: </span><code>      inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<span class="linenr">46: </span><code>    }</code>
<span class="linenr">47: </span><code>  }</code>
<span class="linenr">48: </span><code></code>
<span class="linenr">49: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (inputBox.value.trim() === <span style="color: #CC9393;">''</span>) {</code>
<span class="linenr">50: </span><code>    addItemButton.disabled = <span style="color: #BFEBBF;">true</span>;</code>
<span class="linenr">51: </span><code>  }</code>
<span class="linenr">52: </span><code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
So, lets refactor this bit of code here.
</p>

<p>
Instead of the two different <code>if</code> blocks on line 1 and line 9, replace
the line 9 one with an <code>else</code> clause.
</p>

<p>
Do that, and make sure that program still works as expected.
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>

<div id="outline-container-org3185b82" class="outline-3">
<h3 id="org3185b82"><span class="section-number-3">28.4</span> Solution: Refactoring with the <code>else</code> keyword</h3>
<div class="outline-text-3" id="text-28-4">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr"> 1: </span><code>document.querySelector(<span style="color: #CC9393;">'input'</span>).addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr"> 2: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (inputBox.value.trim() !== <span style="color: #CC9393;">''</span>) {</code>
<span class="linenr"> 3: </span><code>    addItemButton.disabled = <span style="color: #BFEBBF;">false</span>;</code>
<span class="linenr"> 4: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key === <span style="color: #CC9393;">'Enter'</span>) {</code>
<span class="linenr"> 5: </span><code>      shoppingList.appendChild(createNewListItem(inputBox.value.trim()));</code>
<span class="linenr"> 6: </span><code>      inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<span class="linenr"> 7: </span><code>    }</code>
<span class="linenr"> 8: </span><code>  } <span style="color: #F0DFAF; font-weight: bold;">else</span> {</code>
<span class="linenr"> 9: </span><code>    addItemButton.disabled = <span style="color: #BFEBBF;">true</span>;</code>
<span class="linenr">10: </span><code>  }</code>
<span class="linenr">11: </span><code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
Here's the solution. How did everyone get on with it?
</p>

<p>
[Wait]
</p>

<p>
OK, go ahead and add and the commit your changes.
</p>

<p>
[Wait]
</p>

<p>
Now, I still don't like this code very much. There are a number of
red flags for it that stand out to me.
</p>

<p>
I don't expect you to notice any problems – this is a matter of
taste and experience. But I'm going to walk you through them, and
then refactor them out one by one.
</p>

<p>
Those problems are:
</p>

<ul class="org-ul">
<li>Repeated calls to inputBox.value.trim()</li>
</ul>

<p>
Now, we only do this twice in this function, but it's clear that
every time we need the value from the input box we should trim
it.
</p>

<p>
To make this very clear I'd like to create a constant that contains
the trimmed value from the input box, and use that instead. That
should help make the code a bit clearer as well.
</p>

<ul class="org-ul">
<li>There are <code>false</code> and <code>true keywords inside an =if</code> body.</li>
</ul>

<p>
This is a big red flag. <code>if</code> statemtents work by evaluting the
expression inside the parentheses to either a true or a false
value.
</p>

<p>
When you see a literal <code>true</code> or <code>false</code> inside the body of the
<code>if</code> statement, as we have here, that's an indicator that maybe
this <code>if</code> block isn't needed, and the value can be assigned
directly.
</p>

<p>
Don't worry if that's not very clear yet, I'm going to give some
examples.
</p>

<ul class="org-ul">
<li>Too much nesting.</li>
</ul>

<p>
This bit of code has 3 levels of nesting. There's one for the
outermost function, and then we have two <code>if</code> statements nested
inside each other, for three levels in total.
</p>

<p>
That's not super excessive. But in general, the more levels
of nesting you have the more complicated the code is to understand.
It makes it more difficult for you to glance at it and see what
it's going.
</p>

<p>
If we can reduce the amount of nesting then we can make the code
simpler and easier to read.
</p>

<p>
And the simpler and easier to read it is the less chance there
are any bugs.
</p>

</div>
</div>
</div>
</div>

<div id="outline-container-org36b925f" class="outline-2">
<h2 id="org36b925f"><span class="section-number-2">29</span> Refactoring: Hoisting duplicate code in to a variable</h2>
<div class="outline-text-2" id="text-29">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr">40: </span><code>document.querySelector(<span style="color: #CC9393;">'input'</span>).addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr">41: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">trimmedValue</span> = inputBox.value.trim();</code>
<span class="linenr">42: </span><code></code>
<span class="linenr">43: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (trimmedValue !== <span style="color: #CC9393;">''</span>) {</code>
<span class="linenr">44: </span><code>    addItemButton.disabled = <span style="color: #BFEBBF;">false</span>;</code>
<span class="linenr">45: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key === <span style="color: #CC9393;">'Enter'</span>) {</code>
<span class="linenr">46: </span><code>      shoppingList.appendChild(createNewListItem(trimmedValue));</code>
<span class="linenr">47: </span><code>      inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<span class="linenr">48: </span><code>    }</code>
<span class="linenr">49: </span><code>  } <span style="color: #F0DFAF; font-weight: bold;">else</span> {</code>
<span class="linenr">50: </span><code>    addItemButton.disabled = <span style="color: #BFEBBF;">true</span>;</code>
<span class="linenr">51: </span><code>  }</code>
<span class="linenr">52: </span><code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
Here I've created a new constant variable called <code>trimmedValue</code>
and set it to the trimmed copy of whatever's in the input widget.
</p>

<p>
Then I use this constant in two places, once in the <code>if</code> statement,
and once in the call to <code>createNewListItem</code>.
</p>

<p>
Does this make sense to everyone?
</p>

<p>
[Wait]
</p>

<p>
OK, make this change to your code, check that it works, then
add and commit.
</p>

<p>
IMPORTANT: This doesn't actually work, because the else branch
needs to always be taken.
</p>

<p>
[Wait]
</p>

<p>
Now, lets look at these <code>true</code> and <code>false</code> values inside the
<code>if</code> block.
</p>

</div>
</div>
</div>

<div id="outline-container-orge5a50fd" class="outline-2">
<h2 id="orge5a50fd"><span class="section-number-2">30</span> Refactoring: <code>false</code> and <code>true</code> inside the <code>if</code> block</h2>
<div class="outline-text-2" id="text-30">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">if</span> (expression) {</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Body</span></code>
<code>}</code>
</pre>
</div>
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">x</span> = 10;</code>
<code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">y</span> = x === 9;</code>
<code>y;                  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">false</span></code>
<code>y = x &lt; 20;</code>
<code>y;                  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">true</span></code>
</pre>
</div>
<ul class="org-ul">
<li>Expression must evaluate to either <code>true</code> or <code>false</code></li>
</ul>

<div class="NOTES">
<p>
Remember the structure of an <code>if</code> block.
</p>

<p>
In particular, the code inside the parentheses immediately
after the <code>if</code> keyword is an expression that must evaluate
to either a true or false value.
</p>

<p>
We can take the result of an expression and assign it to
a variable.
</p>

</div>
</div>

<div id="outline-container-org4428a47" class="outline-3">
<h3 id="org4428a47"><span class="section-number-3">30.1</span> Refactoring: <code>false</code> and <code>true</code> inside the <code>if</code> block</h3>
<div class="outline-text-3" id="text-30-1">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">isEmpty</span> = inputBox.value.trim() === <span style="color: #CC9393;">''</span>;</code>
</pre>
</div>

<div class="NOTES">
<p>
This means we could write something like this. If the trimmed
value is the empty string then <code>isEmpty</code> will be true.
</p>

<p>
And if the trimmedValue is not empty then <code>isEmpty</code> will be
false.
</p>

<p>
Does that make sense?
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>


<div id="outline-container-org3abaed0" class="outline-3">
<h3 id="org3abaed0"><span class="section-number-3">30.2</span> Refactoring: <code>false</code> and <code>true</code> inside the <code>if</code> block</h3>
<div class="outline-text-3" id="text-30-2">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">isEmpty</span> = inputBox.value.trim() === <span style="color: #CC9393;">''</span>;</code>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-javascript"><code>addItemButton.disabled = inputBox.value.trim() === <span style="color: #CC9393;">''</span>;</code>
</pre>
</div>

<div class="NOTES">
<p>
But this is also exactly how we want the value for the
<code>disabled</code> property to be calculated.
</p>

<p>
So there's no need to create a new variable, we can set
the value directly.
</p>

</div>
</div>
</div>

<div id="outline-container-org5e59c3f" class="outline-3">
<h3 id="org5e59c3f"><span class="section-number-3">30.3</span> Refactoring: <code>false</code> and <code>true</code> inside the <code>if</code> block</h3>
<div class="outline-text-3" id="text-30-3">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr">40: </span><code>document.querySelector(<span style="color: #CC9393;">'input'</span>).addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr">41: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">trimmedValue</span> = inputBox.value.trim();</code>
<span class="linenr">42: </span><code></code>
<span class="linenr">43: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (trimmedValue !== <span style="color: #CC9393;">''</span>) {</code>
<span class="linenr">44: </span><code>    addItemButton.disabled = trimmedValue === <span style="color: #CC9393;">''</span>;</code>
<span class="linenr">45: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key === <span style="color: #CC9393;">'Enter'</span>) {</code>
<span class="linenr">46: </span><code>      shoppingList.appendChild(createNewListItem(trimmedValue));</code>
<span class="linenr">47: </span><code>      inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<span class="linenr">48: </span><code>    }</code>
<span class="linenr">49: </span><code>  } <span style="color: #F0DFAF; font-weight: bold;">else</span> {</code>
<span class="linenr">50: </span><code>    addItemButton.disabled = trimmedValue === <span style="color: #CC9393;">''</span>;</code>
<span class="linenr">51: </span><code>  }</code>
<span class="linenr">52: </span><code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
This is what that looks like.
</p>

<p>
This is not obviously better than just using the literal
<code>true</code> and <code>false</code> values, right?
</p>

<p>
Our code is now longer on line 44 and 50, and it's also
duplicated.
</p>

<p>
Wasn't I just talking about hoisting duplicated code in to
a variable so that the value can be re-used?
</p>

<p>
Yes I was.
</p>

<p>
The reason for this step is that it lets us see that this bit of code
in both branches of the <code>if / else</code> block is identical. Check, lines
44 and 50 are the same.
</p>

<p>
Since they're the same, they don't need to be inside the <code>if / else</code>
block at all.
</p>

<p>
And if we remove line 50 to outside the <code>else</code> block then we don't
need the <code>else</code> either.
</p>

<p>
Before I show you the resulting code, does that make sense?
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>

<div id="outline-container-org1ecd32d" class="outline-3">
<h3 id="org1ecd32d"><span class="section-number-3">30.4</span> Refactoring: <code>false</code> and <code>true</code> inside the <code>if</code> block</h3>
<div class="outline-text-3" id="text-30-4">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr">40: </span><code>document.querySelector(<span style="color: #CC9393;">'input'</span>).addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr">41: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">trimmedValue</span> = inputBox.value.trim();</code>
<span class="linenr">42: </span><code></code>
<span class="linenr">43: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (trimmedValue !== <span style="color: #CC9393;">''</span>) {</code>
<span class="linenr">44: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key === <span style="color: #CC9393;">'Enter'</span>) {</code>
<span class="linenr">45: </span><code>      shoppingList.appendChild(createNewListItem(trimmedValue));</code>
<span class="linenr">46: </span><code>      inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<span class="linenr">47: </span><code>    }</code>
<span class="linenr">48: </span><code>  }</code>
<span class="linenr">49: </span><code></code>
<span class="linenr">50: </span><code>  addItemButton.disabled = inputBox.value.trim() === <span style="color: #CC9393;">''</span>;</code>
<span class="linenr">51: </span><code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
On line 50 I've set the <code>disabled</code> property on the <code>addItemButton</code>.
</p>

<p>
This allows me to remove that code from inside the <code>if</code> block, and
completely remove the <code>else</code> block.
</p>

<p>
This code does exactly the same thing as the previous code, but it's
a little but shorter and a little bit clearer.
</p>

</div>
</div>
</div>
</div>

<div id="outline-container-orgfecd626" class="outline-2">
<h2 id="orgfecd626"><span class="section-number-2">31</span> Refactoring: Nesting</h2>
<div class="outline-text-2" id="text-31">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr">40: </span><code>document.querySelector(<span style="color: #CC9393;">'input'</span>).addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr">41: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">trimmedValue</span> = inputBox.value.trim();</code>
<span class="linenr">42: </span><code></code>
<span class="linenr">43: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (trimmedValue !== <span style="color: #CC9393;">''</span>) {</code>
<span class="linenr">44: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key === <span style="color: #CC9393;">'Enter'</span>) {</code>
<span class="linenr">45: </span><code>      shoppingList.appendChild(createNewListItem(trimmedValue));</code>
<span class="linenr">46: </span><code>      inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<span class="linenr">47: </span><code>    }</code>
<span class="linenr">48: </span><code>  }</code>
<span class="linenr">49: </span><code></code>
<span class="linenr">50: </span><code>  addItemButton.disabled = inputBox.value.trim() === <span style="color: #CC9393;">''</span>;</code>
<span class="linenr">51: </span><code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
This is our current code. It's definitely better, but I still don't
like the nesting.
</p>

<p>
This is definitely a matter of taste, but I'd prefer it if we didn't
have <code>if</code> blocks inside <code>if</code> blocks we can help it.
</p>

<p>
We can refactor those, but first we need to talk about how we return
from a function.
</p>

</div>
</div>

<div id="outline-container-orge3197f4" class="outline-3">
<h3 id="orge3197f4"><span class="section-number-3">31.1</span> Flow of control</h3>
<div class="outline-text-3" id="text-31-1">
<div class="org-center">
<p>
Normal flow of control
</p>
</div>
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">foo</span>() {</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Do something</span></code>
<code></code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Do something else</span></code>
<code>}</code>
<code></code>
<code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Some code</span></code>
<code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">...</span></code>
<code></code>
<code>foo();</code>
<code></code>
<code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Some more code</span></code>
<code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">...</span></code>
</pre>
</div>
<div class="org-center">
<p>
Flow of control with an <code>if</code>
</p>
</div>
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">foo</span>() {</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Do something</span></code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (expression) {</code>
<code>    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Only happens when</span></code>
<code>    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">expression === true</span></code>
<code>  }</code>
<code></code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Do something else</span></code>
<code>}</code>
<code></code>
<code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Some code</span></code>
<code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">...</span></code>
<code></code>
<code>foo();</code>
<code></code>
<code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Some more code</span></code>
<code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">...</span></code>
</pre>
</div>
<div class="NOTES">
<p>
Here are two main types of flow of control we've seen so far.
</p>

<p>
On the left is without an <code>if</code> statement. Our code runs, and
we call a function. Control flow jumps in to the function, runs
all the way through, and then jumps back out of the function to
where it left off.
</p>

<p>
On the right is control flow with an <code>if</code> statement. It's very
similar, but in the function there's a chance that some of the
code might not run if the expression is false.
</p>

</div>
</div>
</div>

<div id="outline-container-orgebeb853" class="outline-3">
<h3 id="orgebeb853"><span class="section-number-3">31.2</span> Returning early from a function</h3>
<div class="outline-text-3" id="text-31-2">
<ul class="org-ul">
<li><code>return</code> keyword allows early return from a function</li>
</ul>
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">foo</span>() {</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Do something</span></code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (expression) {</code>
<code>    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Only happens when</span></code>
<code>    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">expression === true</span></code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">return</span>;</code>
<code>  }</code>
<code></code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Do something else</span></code>
<code>}</code>
<code></code>
<code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Some code</span></code>
<code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">...</span></code>
<code></code>
<code>foo();</code>
<code></code>
<code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Some more code</span></code>
<code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">...</span></code>
</pre>
</div>
<div class="NOTES">
<p>
We can use a new keyword, called <code>return</code>, to return earlier than
normal from a function.
</p>

<p>
In this example, if the expression in the <code>if</code> statement is true
then the code in the body of the <code>if</code> statement will be run, and
then the function stops and control returns to where it was called
from. The code under "// Do something else" is never run in this
case.
</p>

</div>
</div>
</div>

<div id="outline-container-org57f84af" class="outline-3">
<h3 id="org57f84af"><span class="section-number-3">31.3</span> Solution: Returning early from a function</h3>
<div class="outline-text-3" id="text-31-3">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr">40: </span><code>});</code>
<span class="linenr">41: </span><code></code>
<span class="linenr">42: </span><code>inputBox.addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span> (<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr">43: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">trimmedValue</span> = inputBox.value.trim();</code>
<span class="linenr">44: </span><code>  addItemButton.disabled = trimmedValue === <span style="color: #CC9393;">''</span>;</code>
<span class="linenr">45: </span><code></code>
<span class="linenr">46: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (trimmedValue === <span style="color: #CC9393;">''</span>) {</code>
<span class="linenr">47: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">return</span>;</code>
<span class="linenr">48: </span><code>  }</code>
<span class="linenr">49: </span><code></code>
<span class="linenr">50: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key !== <span style="color: #CC9393;">'Enter'</span>) {</code>
<span class="linenr">51: </span><code>    <span style="color: #F0DFAF; font-weight: bold;">return</span>;</code>
<span class="linenr">52: </span><code>  }</code>
<span class="linenr">53: </span><code></code>
<span class="linenr">54: </span><code>  shoppingList.appendChild(createNewListItem(trimmedValue));</code>
<span class="linenr">55: </span><code>  inputBox.value = <span style="color: #CC9393;">''</span>;</code>
</pre>
</div>

<div class="NOTES">
<p>
Here's what our function looks like using <code>if</code> statements and
returning early.
</p>

<p>
We still have two <code>if</code> statements, but they're no longer nested
inside one another, making the code a bit simpler in my opinion.
</p>

<p>
The trade off is that function is now a bit longer.
</p>

<p>
This is a pretty good pattern to follow when writing functions.
</p>

<p>
Specifically:
</p>

<ul class="org-ul">
<li>Start with a block of code defines any variables or constants</li>
</ul>
<p>
that you need.
</p>

<ul class="org-ul">
<li>Then have a block of code that checks to see if the function should</li>
</ul>
<p>
do any work, or if it should return early.
</p>

<ul class="org-ul">
<li>Finally, have the code that actually does what the function is</li>
</ul>
<p>
supposed to do.
</p>

<p>
This clearly separates out the different responsibilities of the
function, and reduces the amount of nesting and duplicated code.
</p>

<p>
Does this make sense? Any questions?
</p>

<p>
[Wait]
</p>

<p>
OK, go ahead and make the equivalent change to your <code>keyup</code>
handler, test it, add and commit.
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>

<div id="outline-container-org8241fb1" class="outline-3">
<h3 id="org8241fb1"><span class="section-number-3">31.4</span> Solution: Returning early from a function</h3>
<div class="outline-text-3" id="text-31-4">
<div class="org-src-container">
<pre class="src src-javascript"><span class="linenr">31: </span><code><span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">addItemButton</span> = document.querySelector(<span style="color: #CC9393;">'button'</span>);</code>
<span class="linenr">32: </span><code></code>
<span class="linenr">33: </span><code>addItemButton.addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span> (<span style="color: #DFAF8F;">event</span>) {</code>
<span class="linenr">34: </span><code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">trimmedValue</span> = inputBox.value.trim();</code>
<span class="linenr">35: </span><code></code>
<span class="linenr">36: </span><code>  shoppingList.appendChild(createNewListItem(trimmedValue));</code>
<span class="linenr">37: </span><code>  inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<span class="linenr">38: </span><code>  addItemButton.disabled = <span style="color: #BFEBBF;">true</span>;</code>
</pre>
</div>

<div class="NOTES">
<p>
And we can make a very similar change to the click handler for
the button.
</p>

<p>
Again, we save the trimmed value in to a constant, and perform
an early return if the value is empty.
</p>

<p>
Any questions on this?
</p>

<p>
[Wait]
</p>

<p>
OK, go ahead and make the equivalent change to your <code>click</code>
handler, test it, add and commit.
</p>

<p>
[Wait]
</p>

</div>
</div>
</div>
</div>

<div id="outline-container-org6148b4a" class="outline-2 smaller">
<h2 id="org6148b4a"><span class="section-number-2">32</span> Refactoring: Before and after</h2>
<div class="outline-text-2" id="text-32">
<div class="org-src-container">
<pre class="src src-javascript"><code>addItemButton.addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (inputBox.value.trim() !== <span style="color: #CC9393;">''</span>) {</code>
<code>    shoppingList.appendChild(createNewListItem(inputBox.value.trim()));</code>
<code>    inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<code>    addItemButton.disabled = <span style="color: #BFEBBF;">true</span>;</code>
<code>  }</code>
<code>  inputBox.focus();</code>
<code>});</code>
<code></code>
<code>inputBox.addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (inputBox.value.trim() !== <span style="color: #CC9393;">''</span>) {</code>
<code>    addItemButton.disabled = <span style="color: #BFEBBF;">false</span>;</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key === <span style="color: #CC9393;">'Enter'</span>) {</code>
<code>      shoppingList.appendChild(createNewListItem(inputBox.value.trim()));</code>
<code>      inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<code>    }</code>
<code>  }</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (inputBox.value.trim() === <span style="color: #CC9393;">''</span>) {</code>
<code>    addItemButton.disabled = <span style="color: #BFEBBF;">true</span>;</code>
<code>  }</code>
<code>});</code>
<code></code>
<code>inputBox.focus();</code>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">addItemButton</span> = document.querySelector(<span style="color: #CC9393;">'button'</span>);</code>
<code></code>
<code>addItemButton.addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span> (<span style="color: #DFAF8F;">event</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">trimmedValue</span> = inputBox.value.trim();</code>
<code></code>
<code>  shoppingList.appendChild(createNewListItem(trimmedValue));</code>
<code>  inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<code>  addItemButton.disabled = <span style="color: #BFEBBF;">true</span>;</code>
<code>  inputBox.focus();</code>
<code>});</code>
<code></code>
<code>inputBox.addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span> (<span style="color: #DFAF8F;">event</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">trimmedValue</span> = inputBox.value.trim();</code>
<code>  addItemButton.disabled = trimmedValue === <span style="color: #CC9393;">''</span>;</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (trimmedValue === <span style="color: #CC9393;">''</span>) {</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">return</span>;</code>
<code>  }</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key !== <span style="color: #CC9393;">'Enter'</span>) {</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">return</span>;</code>
<code>  }</code>
<code></code>
<code>  shoppingList.appendChild(createNewListItem(trimmedValue));</code>
<code>  inputBox.value = <span style="color: #CC9393;">''</span>;</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb34b58a" class="outline-2">
<h2 id="orgb34b58a"><span class="section-number-2">33</span> Refactoring: Recap</h2>
<div class="outline-text-2" id="text-33">
<ul class="org-ul">
<li><code>const</code> to declare constant variables</li>
<li><code>if (...) { ... } else if (...) { ... } else { ... }</code> blocks</li>
<li>Returning early from functions
<ul class="org-ul">
<li><code>return</code> keyword</li>
</ul></li>
<li>Refactoring to remove nesting</li>
</ul>
</div>
</div>

<div id="outline-container-org5b57731" class="outline-2">
<h2 id="org5b57731"><span class="section-number-2">34</span> JSDoc comments</h2>
<div class="outline-text-2" id="text-34">
</div>

<div id="outline-container-org84907f9" class="outline-3">
<h3 id="org84907f9"><span class="section-number-3">34.1</span> Good practice to comment functions</h3>
<div class="outline-text-3" id="text-34-1">
<ul class="org-ul">
<li>Programming is about communication
<ul class="org-ul">
<li>Good comments cover <b>what</b>, and <b>why</b></li>
<li>The code describes <b>how</b></li>
</ul></li>
<li>Javascript does not have a single standard for comments
<ul class="org-ul">
<li><code>JSDoc</code> is a widely adopted standard</li>
<li>IDEs understand JSDoc and do useful things with it</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org2de1cc2" class="outline-3">
<h3 id="org2de1cc2"><span class="section-number-3">34.2</span> Sample JSDoc</h3>
<div class="outline-text-3" id="text-34-2">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #9FC59F;">/**</span></code>
<code><span style="color: #9FC59F;"> * Creates and returns an 'li' element for inclusion in shopping list.</span></code>
<code><span style="color: #9FC59F;"> *</span></code>
<code><span style="color: #9FC59F;"> * @param {string} itemName Name of the item to add to the list</span></code>
<code><span style="color: #9FC59F;"> * @returns {HTMLElement} li element</span></code>
<code><span style="color: #9FC59F;"> */</span></code>
</pre>
</div>

<ul class="org-ul">
<li><code>/**</code></li>
<li>Function description</li>
<li>Optionally, more detail about the function
<ul class="org-ul">
<li>Design decisions, links to documents, specifications, etc</li>
</ul></li>
<li>0-n <code>@param</code> entries that describe each parameter</li>
<li>0-1 <code>@return</code> entry for the return value</li>
</ul>

<div class="NOTES">
<p>
JSDoc comments all start with <code>/**</code> (slash, star, star). If you type
that before a function WebStorm will automatically prefill some of
the rest of the material.
</p>

<p>
The next line starts with a description of the function. Typically
you would try and keep this short – keep it one line if possible.
</p>

<p>
If your "brief" description is longer than a line it's an indicator
that the function might be doing too much and needs breaking up in
to smaller functions.
</p>

<p>
If necessary you can include more information in new paragraphs after
the brief description. Here you can go in to more detail – maybe
there's a specification you're trying to follow, or a design doc
that describes what the function needs to do. This would be a good
place to link to that information.
</p>

<p>
If the function takes any parameters then you describe them with
<code>@param</code> entries.
</p>

<p>
Each <code>@param</code> entry consists of the type of the parameter that the
function expects, in curly brackets. Here, our function expects that
the <code>itemName</code> parameter contains a string.
</p>

<p>
After that is the name of the parameter. And then a brief description
of what the parameter is for.
</p>

<p>
Finally, if the function returns a value then there is an <code>@return</code>
block that explains the value. This is like an <code>@param</code> block, only
without the "name" part – it goes straight from the type in curly
brackets to the description.
</p>

</div>
</div>
</div>

<div id="outline-container-orga20d961" class="outline-3">
<h3 id="orga20d961"><span class="section-number-3">34.3</span> Exercise: Add this JSdoc</h3>
<div class="outline-text-3" id="text-34-3">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #9FC59F;">/**</span></code>
<code><span style="color: #9FC59F;"> * Creates and returns an 'li' element for inclusion in the shopping list.</span></code>
<code><span style="color: #9FC59F;"> *</span></code>
<code><span style="color: #9FC59F;"> * @param {string} itemName Name of the item to add to the list</span></code>
<code><span style="color: #9FC59F;"> * @returns {HTMLElement} li element</span></code>
<code><span style="color: #9FC59F;"> */</span></code>
</pre>
</div>

<ul class="org-ul">
<li>Add this immediately before your <code>createNewListItem</code> function.</li>
<li>Go to a place where the function is called, and press:
<ul class="org-ul">
<li><code>Ctrl-Q</code> (Windows)</li>
<li><code>Ctrl-J</code> (OS X)</li>
</ul></li>
<li><code>File</code> &gt; <code>Settings</code> &gt; <code>Editor</code> &gt; <code>General</code> &gt; <code>Show quick documentation on mouse move</code></li>
<li>What do you think?</li>
</ul>
</div>
</div>
<div id="outline-container-org985a37f" class="outline-3">
<h3 id="org985a37f"><span class="section-number-3">34.4</span> Followup material on comments and commenting style</h3>
<div class="outline-text-3" id="text-34-4">
<ul class="org-ul">
<li><a href="https://google.github.io/styleguide/jsguide.html#jsdoc">Google Javascript Style Guide</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgaa0ad2c" class="outline-2">
<h2 id="orgaa0ad2c"><span class="section-number-2">35</span> UI followup work</h2>
<div class="outline-text-2" id="text-35">
<ul class="org-ul">
<li>Choose a colour palette</li>
<li>Header image</li>
<li>Styling input elements
<ul class="org-ul">
<li>Red border when the input is empty?</li>
</ul></li>
<li>Different fonts and font-sizes
<ul class="org-ul">
<li>A font that looks like handwriting for the list?</li>
</ul></li>
</ul>
<ul class="org-ul">
<li>Using icons
<ul class="org-ul">
<li>Font Awesome, trash can icon for delete button</li>
<li>Shopping cart icon for "Add item"</li>
</ul></li>
</ul>
<div class="NOTES">
<p>
Time for a change of pace.
</p>

<p>
We've been doing a lot Javascript, and it's been a while since
we touched CSS.
</p>

<p>
So now you've got some time to add some CSS
</p>

</div>
</div>
</div>
<div id="outline-container-org2b60fd8" class="outline-2">
<h2 id="org2b60fd8"><span class="section-number-2">36</span> Functionality followup work</h2>
<div class="outline-text-2" id="text-36">
<ul class="org-ul">
<li>Adding a "Delete all" button</li>
<li>Handling <code>document.readyState</code></li>
<li>Adding quantities</li>
</ul>
</div>
</div>


<div id="outline-container-org76076a1" class="outline-2">
<h2 id="org76076a1"><span class="section-number-2">37</span> Add a "Delete all" button (or "Clear list")</h2>
<div class="outline-text-2" id="text-37">
<ul class="org-ul">
<li>We know
<ul class="org-ul">
<li>How to create a button</li>
<li>How to listen for button clicks</li>
<li>How to find an element
<ul class="org-ul">
<li><code>document.querySelector()</code></li>
</ul></li>
<li>How to delete an element
<ul class="org-ul">
<li><code>el.remove()</code></li>
</ul></li>
</ul></li>
</ul>
<ul class="org-ul">
<li>We don't know
<ul class="org-ul">
<li>How to find all elements of a type</li>
<li>How to delete all elements of a type</li>
</ul></li>
</ul>
<div class="NOTES">
<p>
We want to be able to add a button called "Clear list".
</p>

<p>
When it's clicked we'll delete all of the list items that have been
added, so the list is empty.
</p>

<p>
We already know most of how to do this. We can create the button and
listen for clicks on it, and we can find individual elements. But
finding more than one element, or deleting more than element is new.
</p>

<p>
So lets learn how to do that.
</p>

</div>
</div>

<div id="outline-container-org86c7fe3" class="outline-3">
<h3 id="org86c7fe3"><span class="section-number-3">37.1</span> <code>document.querySelectorAll()</code></h3>
<div class="outline-text-3" id="text-37-1">
<ul class="org-ul">
<li><code>.querySelector(...);</code> returns first element</li>
<li><code>.querySelectorAll(...);</code> returns all elements</li>
<li>As a <code>NodeList</code></li>
</ul>
</div>
</div>

<div id="outline-container-orge356ab8" class="outline-3">
<h3 id="orge356ab8"><span class="section-number-3">37.2</span> <code>NodeList</code>?</h3>
<div class="outline-text-3" id="text-37-2">
<ul class="org-ul">
<li>A collection of nodes in the DOM tree</li>
<li>Organised as a list of things</li>
<li>A bit like an array</li>
</ul>
</div>
</div>

<div id="outline-container-org09a24a0" class="outline-3">
<h3 id="org09a24a0"><span class="section-number-3">37.3</span> Array?</h3>
</div>
<div id="outline-container-org18da42d" class="outline-3">
<h3 id="org18da42d"><span class="section-number-3">37.4</span> Non-array variables</h3>
<div class="outline-text-3" id="text-37-4">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">x</span> = 10;</code>
<code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">y</span> = <span style="color: #CC9393;">'This is a string'</span>;</code>
<code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">z</span> = document.querySelector(<span style="color: #CC9393;">'body'</span>);</code>
</pre>
</div>

<div class="NOTES">
<p>
Before we can progress much further though we need to expand our
understanding of Javascript variables and what they can contain.
</p>

<p>
So far we've been looking at variables as though they contain a
single thing.
</p>

<p>
That thing might be a number, or a string, or an element, but it's
always been just one thing.
</p>

</div>
</div>
</div>

<div id="outline-container-org7fa5e2d" class="outline-3">
<h3 id="org7fa5e2d"><span class="section-number-3">37.5</span> Arrays of numbers</h3>
<div class="outline-text-3" id="text-37-5">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">a</span> = [1, 2, 3];</code>
<code></code>
<code>a[0];  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">1  (index 0)</span></code>
<code>a[1];  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">2  (index 1)</span></code>
<code>a[2];  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">3  (index 2)</span></code>
<code>a[3];  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">undefined</span></code>
<code>a;     <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">[1, 2, 3]</span></code>
</pre>
</div>

<div class="NOTES">
<p>
Here's how we declare and use an array.
</p>

<p>
Just like with regular variables we use <code>let</code> to declare them, and
we give them a name.
</p>

<p>
However, because the array variable can contain multiple values
we have to write those values inside square brackets, and separate them
with spaces.
</p>

<p>
This creates the array with three different values.
</p>

<p>
We say that each value is at a different <b>index</b> in array.
</p>

<p>
<b>Indicies</b> start counting at 0. So the first value in the array is at
index 0, the second value is at index 1, and so on.
</p>

<p>
To find out what value is in the array at a particular index we write the
name of the array variable, and then we put the index number that we are
interested in inside square brackets.
</p>

<p>
There should be no spaces between the name of the variable and the square
brackets.
</p>

<p>
If we try and use an index value that does not contain a value then we get
back the special <code>undefined</code> value that we've seen before.
</p>

<p>
We can also use the whole array, by giving its name. We use this if we want
to pass an array as a parameter to a function, for example.
</p>

</div>
</div>
</div>

<div id="outline-container-org7cd2964" class="outline-3">
<h3 id="org7cd2964"><span class="section-number-3">37.6</span> Arrays of strings</h3>
<div class="outline-text-3" id="text-37-6">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">b</span> = [<span style="color: #CC9393;">'Hello'</span>, <span style="color: #CC9393;">'Powercoders'</span>];</code>
<code></code>
<code>b[0];  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">"Hello";</span></code>
<code>b[1];  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">"Powercoders";</span></code>
</pre>
</div>

<div class="NOTES">
<p>
Values in an array don't have to be numbers, they can be strings too,
as in this example.
</p>

<p>
Using the index numbers to find out what values are at each index is
identical.
</p>

</div>
</div>
</div>

<div id="outline-container-org4088164" class="outline-3">
<h3 id="org4088164"><span class="section-number-3">37.7</span> Arrays of mixed types</h3>
<div class="outline-text-3" id="text-37-7">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">c</span> = [100, <span style="color: #CC9393;">'Basel'</span>];</code>
<code></code>
<code>c[0];  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">100</span></code>
<code>c[1];  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">"Basel"</span></code>
</pre>
</div>

<div class="NOTES">
<p>
And you can mix the types of the values in a single array. Here we have an
array where the first element in the array is a number and the second is a
string.
</p>

</div>
</div>
</div>

<div id="outline-container-org00218c6" class="outline-3">
<h3 id="org00218c6"><span class="section-number-3">37.8</span> Index values can be expressions</h3>
<div class="outline-text-3" id="text-37-8">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">let c = [100, 'Basel'];</span></code>
<code></code>
<code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">x</span> = 1;</code>
<code>c[x];      <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">"Basel"</span></code>
<code>c[x - 1];  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">100</span></code>
</pre>
</div>

<div class="NOTES">
<p>
Array index values don't have to be numbers – they can be expressions that
evaluate to numbers as well.
</p>

<p>
In this example <code>x</code> is 1, so if we use that as the index value we get the
second element in the array.
</p>

<p>
If we substract 1 from x we get 0, which is why the second example returns
the first element in the array (remember, indices always start at 0).
</p>

</div>
</div>
</div>

<div id="outline-container-org676ba9e" class="outline-3">
<h3 id="org676ba9e"><span class="section-number-3">37.9</span> Arrays have a <code>length</code> property</h3>
<div class="outline-text-3" id="text-37-9">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">let c = [100, 'Basel'];</span></code>
<code></code>
<code>c.length;  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">2</span></code>
<code></code>
<code>c[c.length - 1];  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">"Basel"</span></code>
</pre>
</div>

<div class="NOTES">
<p>
Arrays are also objects, which means that they have properties and methods.
</p>

<p>
The only property we typically care about for an array is the <code>length</code>
property. This tells us how long the array is – how many elements it
contains.
</p>

<p>
This is always one larger than the last index in the array. So you can use
the length property to find the value of the last element in the array like
this.
</p>

</div>
</div>
</div>

<div id="outline-container-orgaf0cd5d" class="outline-3">
<h3 id="orgaf0cd5d"><span class="section-number-3">37.10</span> Single-element arrays</h3>
<div class="outline-text-3" id="text-37-10">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">d</span> = [1];</code>
<code></code>
<code>d.length;  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">1</span></code>
</pre>
</div>

<div class="NOTES">
<p>
Even if an array is going to start with only a single element you must
still put the element inside square brackets, like this.
</p>

</div>
</div>
</div>

<div id="outline-container-org40670c8" class="outline-3">
<h3 id="org40670c8"><span class="section-number-3">37.11</span> Empty arrays</h3>
<div class="outline-text-3" id="text-37-11">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">e</span> = [];</code>
<code></code>
<code>e.length;  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">0</span></code>
</pre>
</div>

<div class="NOTES">
<p>
And it's possible to have completely empty arrays, with no elements. We
declare them like this.
</p>

</div>
</div>
</div>

<div id="outline-container-orgae6053c" class="outline-3">
<h3 id="orgae6053c"><span class="section-number-3">37.12</span> Modifying arrays</h3>
<div class="outline-text-3" id="text-37-12">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">let e = [];</span></code>
<code></code>
<code>e[0] = 1;</code>
<code>e[1] = 2;</code>
<code>e;         <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">[1, 2]</span></code>
<code>e[0] = 3;</code>
<code>e;         <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">[3, 2]</span></code>
<code>e.length;  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">2</span></code>
<code></code>
<code>e.length = 0;</code>
<code>e;         <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">[]</span></code>
<code>e.length = 3;</code>
<code>e;         <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">[undefined, undefined, undefined]</span></code>
</pre>
</div>

<div class="NOTES">
<p>
Assigning a value to an array is the same as assigning a value to a
variable, you use the equals sign.
</p>

<p>
However, you must specify the index in the array that you're assigning
in to.
</p>

<p>
If you assign in to an index that doesn't already exist, as in the first
two examples, then it's automatically created for you.
</p>

<p>
If you assign to an index that does exist then the value at that index is
replaced with the new value.
</p>

<p>
And if you change the length then the array shrinks or grows based on the
new length.
</p>

</div>
</div>
</div>

<div id="outline-container-orgfa66d36" class="outline-3">
<h3 id="orgfa66d36"><span class="section-number-3">37.13</span> (some) Array methods</h3>
<div class="outline-text-3" id="text-37-13">
<ul class="org-ul">
<li><code>push</code></li>
<li><code>pop</code></li>
<li><code>shift</code></li>
<li><code>unshift</code></li>
<li><code>join</code></li>
<li><code>foreach</code></li>
<li>Check MDN for more</li>
</ul>

<div class="NOTES">
<p>
As objects arrays also have some useful methods, including <code>push</code>, <code>pop</code>,
<code>shift</code>, <code>unshift</code>, <code>join</code>, and <code>foreach</code>.
</p>

<p>
This isn't a complete list by the way, for that you can check out MDN.
</p>

</div>
</div>
<div id="outline-container-org35f7c61" class="outline-4">
<h4 id="org35f7c61"><span class="section-number-4">37.13.1</span> <code>push</code></h4>
<div class="outline-text-4" id="text-37-13-1">
<ul class="org-ul">
<li>Adds a new element to the end of the array</li>
<li>Returns the new length</li>
</ul>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">x</span> = [1, 2, 3];</code>
<code></code>
<code>x.push(0);  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">4</span></code>
<code>x;          <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">[1, 2, 3, 0];</span></code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9803a64" class="outline-4">
<h4 id="org9803a64"><span class="section-number-4">37.13.2</span> <code>pop</code></h4>
<div class="outline-text-4" id="text-37-13-2">
<ul class="org-ul">
<li>Removes the last element from the end of the array</li>
<li>Returns the element removed</li>
</ul>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">x</span> = [1, 2, 3];</code>
<code></code>
<code>x.pop();    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">3</span></code>
<code>x;          <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">[1, 2]</span></code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org30b700a" class="outline-4">
<h4 id="org30b700a"><span class="section-number-4">37.13.3</span> <code>shift</code></h4>
<div class="outline-text-4" id="text-37-13-3">
<ul class="org-ul">
<li>Removes the first element from the array</li>
<li>Returns the element removed</li>
</ul>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">x</span> = [1, 2, 3];</code>
<code></code>
<code>x.shift();  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">1;</span></code>
<code>x;          <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">[2, 3]</span></code>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge0ec968" class="outline-4">
<h4 id="orge0ec968"><span class="section-number-4">37.13.4</span> <code>unshift</code></h4>
<div class="outline-text-4" id="text-37-13-4">
<ul class="org-ul">
<li>Adds one or more elements to the front of the array</li>
<li>Returns the new length</li>
</ul>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">x</span> = [1, 2, 3];</code>
<code></code>
<code>x.unshift(4, 5);  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">5</span></code>
<code>x;                <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">[4, 5, 1, 2, 3]</span></code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org992d5f6" class="outline-4">
<h4 id="org992d5f6"><span class="section-number-4">37.13.5</span> <code>join</code></h4>
<div class="outline-text-4" id="text-37-13-5">
<ul class="org-ul">
<li>Converts elements to strings</li>
<li>Returns new string, joining the elements</li>
</ul>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">x</span> = [1, 2, 3];</code>
<code></code>
<code>x.join(<span style="color: #CC9393;">' '</span>);   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">"1 2 3"</span></code>
<code>x.join(<span style="color: #CC9393;">','</span>);   <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">"1,2,3"</span></code>
<code>x.join(<span style="color: #CC9393;">', '</span>);  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">"1, 2, 3"</span></code>
<code></code>
<code>[1, 2, 3].join(<span style="color: #CC9393;">' '</span>);  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">"1 2 3"</span></code>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfbc5275" class="outline-4">
<h4 id="orgfbc5275"><span class="section-number-4">37.13.6</span> <code>join</code></h4>
<div class="outline-text-4" id="text-37-13-6">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">x</span> = [<span style="color: #CC9393;">'Hello'</span>, <span style="color: #CC9393;">'Powercoders'</span>, <span style="color: #CC9393;">'Basel'</span>];</code>
<code></code>
<code>x.join(<span style="color: #CC9393;">''</span>);     <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">"HelloPowercodersBasel"</span></code>
<code>x.join(<span style="color: #CC9393;">' '</span>);    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">"Hello Powercoders Basel"</span></code>
<code>x.join(<span style="color: #CC9393;">' - '</span>);  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">"Hello - Powercoders - Basel"</span></code>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge67553b" class="outline-4">
<h4 id="orge67553b"><span class="section-number-4">37.13.7</span> <code>forEach</code></h4>
<div class="outline-text-4" id="text-37-13-7">
<ul class="org-ul">
<li>Calls a function once for each element</li>
</ul>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">x</span> = [1, 2, 3];</code>
<code></code>
<code>x.forEach(<span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">el</span>) {</code>
<code>  console.log(el + 2);</code>
<code>});</code>
<code></code>
<code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">3</span></code>
<code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">4</span></code>
<code><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">5</span></code>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org796b4ea" class="outline-3">
<h3 id="org796b4ea"><span class="section-number-3">37.14</span> Iterables</h3>
<div class="outline-text-3" id="text-37-14">
<ul class="org-ul">
<li><code>forEach</code> <b>iterates</b> over the array</li>
</ul>

<blockquote>
<p>
Iterate: To say or do again and again
</p>
</blockquote>

<blockquote>
<p>
Iterable: Something we can iterate over
</p>
</blockquote>

<div class="NOTES">
<p>
<code>forEach</code> is an important example here.
</p>

<p>
We say that it <b>iterates</b> over the array. Our function is called again
and again while there are elements in the array.
</p>

<p>
This means that our array is an example of an <b>iterable</b> – something that
we can iterate over.
</p>

</div>
</div>
</div>

<div id="outline-container-orga101b43" class="outline-3">
<h3 id="orga101b43"><span class="section-number-3">37.15</span> <code>NodeList</code> is not an array…</h3>
<div class="outline-text-3" id="text-37-15">
<ul class="org-ul">
<li>… but it is an <b>iterable</b></li>
<li>So we can iterate over it with <code>forEach</code></li>
<li>And we can remove elements with <code>.remove()</code></li>
</ul>
</div>
</div>

<div id="outline-container-org2490766" class="outline-3">
<h3 id="org2490766"><span class="section-number-3">37.16</span> Exercise: Removing nodes</h3>
<div class="outline-text-3" id="text-37-16">
<ul class="org-ul">
<li>Open the shopping list in the browser</li>
<li>Add some items</li>
<li>Open the console</li>
<li>Find all the list items using <code>querySelectorAll()</code></li>
<li>Iterate over them using <code>forEach()</code></li>
<li>Call the <code>remove()</code> method in the function</li>
</ul>
</div>
</div>

<div id="outline-container-org3d9c42e" class="outline-3">
<h3 id="org3d9c42e"><span class="section-number-3">37.17</span> Solution: Removing nodes</h3>
<div class="outline-text-3" id="text-37-17">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">items</span> = document.querySelectorAll(<span style="color: #CC9393;">'li'</span>);</code>
<code>items.forEach(<span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">el</span>) {</code>
<code>  el.remove();</code>
<code>});</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd127686" class="outline-3">
<h3 id="orgd127686"><span class="section-number-3">37.18</span> Adding a "Clear list" button</h3>
<div class="outline-text-3" id="text-37-18">
</div>
<div id="outline-container-orgdd20df0" class="outline-4">
<h4 id="orgdd20df0"><span class="section-number-4">37.18.1</span> Exercise: Add a button</h4>
<div class="outline-text-4" id="text-37-18-1">
<ul class="org-ul">
<li>Add a button next to the "Add item" button</li>
<li>Set the <code>id</code> to <code>clear</code></li>
<li>Give the existing button an <code>id</code> of <code>add</code></li>
</ul>
</div>
</div>

<div id="outline-container-org143749d" class="outline-4">
<h4 id="org143749d"><span class="section-number-4">37.18.2</span> Solution: Add a button</h4>
<div class="outline-text-4" id="text-37-18-2">
<div class="org-src-container">
<pre class="src src-html"><code>&lt;<span style="color: #93E0E3;">div</span>&gt;</code>
<code>  &lt;<span style="color: #93E0E3;">label</span> <span style="color: #DFAF8F;">for</span>=<span style="color: #CC9393;">"item"</span>&gt;Enter a new item:&lt;/<span style="color: #93E0E3;">label</span>&gt;</code>
<code>  &lt;<span style="color: #93E0E3;">input</span> <span style="color: #DFAF8F;">type</span>=<span style="color: #CC9393;">"text"</span> <span style="color: #DFAF8F;">id</span>=<span style="color: #CC9393;">"item"</span></code>
<code>    <span style="color: #DFAF8F;">placeholder</span>=<span style="color: #CC9393;">"Type something to buy"</span>&gt;</code>
<code>  &lt;<span style="color: #93E0E3;">button</span> <span style="color: #DFAF8F;">id</span>=<span style="color: #CC9393;">"add"</span>&gt;Add item&lt;/<span style="color: #93E0E3;">button</span>&gt;</code>
<code>  &lt;<span style="color: #93E0E3;">button</span> <span style="color: #DFAF8F;">id</span>=<span style="color: #CC9393;">"clear"</span>&gt;Clear list&lt;/<span style="color: #93E0E3;">button</span>&gt;</code>
<code>&lt;/<span style="color: #93E0E3;">div</span>&gt;</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf0cf974" class="outline-4">
<h4 id="orgf0cf974"><span class="section-number-4">37.18.3</span> Exercise: Click listener to delete the listitems</h4>
<div class="outline-text-4" id="text-37-18-3">
<ul class="org-ul">
<li>Add a <code>const</code> variable, store the "Clear list" button</li>
<li>Add a click event listener that
<ul class="org-ul">
<li>Finds all the <code>li</code> elements</li>
<li>Removes them</li>
<li>Disables the "Clear list" button</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgd2e0690" class="outline-4">
<h4 id="orgd2e0690"><span class="section-number-4">37.18.4</span> Solution: Click listener to delete the listitems</h4>
<div class="outline-text-4" id="text-37-18-4">
<div class="org-src-container">
<pre class="src src-javascript"><code>document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span> (<span style="color: #DFAF8F;">event</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">inputBox</span> = document.getElementById(<span style="color: #CC9393;">'item'</span>);</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">shoppingList</span> = document.querySelector(<span style="color: #CC9393;">'ul'</span>);</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">addItemButton</span> = document.querySelector(<span style="color: #CC9393;">'#add'</span>);</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">clearListButton</span> = document.querySelector(<span style="color: #CC9393;">'#clear'</span>);</code>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-javascript"><code>clearListButton.addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span> (<span style="color: #DFAF8F;">event</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">listItems</span> = document.querySelectorAll(<span style="color: #CC9393;">'li'</span>);</code>
<code>  listItems.forEach(<span style="color: #F0DFAF; font-weight: bold;">function</span> (<span style="color: #DFAF8F;">element</span>) {</code>
<code>    element.remove();</code>
<code>  });</code>
<code>  inputBox.focus()</code>
<code>  clearListButton.disabled = <span style="color: #BFEBBF;">true</span>;</code>
<code>});</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org20b303e" class="outline-4">
<h4 id="org20b303e"><span class="section-number-4">37.18.5</span> Exercise: Enable the button when items are added</h4>
<div class="outline-text-4" id="text-37-18-5">
<ul class="org-ul">
<li>Find both places in the code where items are added</li>
<li>Modify both of them to enable <code>clearListButton</code></li>
</ul>
</div>
</div>

<div id="outline-container-org3bbceae" class="outline-4">
<h4 id="org3bbceae"><span class="section-number-4">37.18.6</span> Solution: Enable the button when items are added</h4>
<div class="outline-text-4" id="text-37-18-6">
<div class="org-src-container">
<pre class="src src-javascript"><code>addItemButton.addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span> (<span style="color: #DFAF8F;">event</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">trimmedValue</span> = inputBox.value.trim();</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (trimmedValue === <span style="color: #CC9393;">''</span>) {</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">return</span>;</code>
<code>  }</code>
<code></code>
<code>  shoppingList.appendChild(createNewListItem(trimmedValue));</code>
<code>  inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<code>  addItemButton.disabled = <span style="color: #BFEBBF;">true</span>;</code>
<code>  clearListButton.disabled = <span style="color: #BFEBBF;">false</span>;</code>
<code>  inputBox.focus();</code>
<code>});</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org85f9768" class="outline-4">
<h4 id="org85f9768"><span class="section-number-4">37.18.7</span> Solution: Enable the button when items are added</h4>
<div class="outline-text-4" id="text-37-18-7">
<div class="org-src-container">
<pre class="src src-javascript"><code>inputBox.addEventListener(<span style="color: #CC9393;">'keyup'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span> (<span style="color: #DFAF8F;">event</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">trimmedValue</span> = inputBox.value.trim();</code>
<code>  addItemButton.disabled = trimmedValue === <span style="color: #CC9393;">''</span>;</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (trimmedValue === <span style="color: #CC9393;">''</span>) {</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">return</span>;</code>
<code>  }</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (event.key !== <span style="color: #CC9393;">'Enter'</span>) {</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">return</span>;</code>
<code>  }</code>
<code></code>
<code>  shoppingList.appendChild(createNewListItem(trimmedValue));</code>
<code>  inputBox.value = <span style="color: #CC9393;">''</span>;</code>
<code>  addItemButton.disabled = <span style="color: #BFEBBF;">true</span>;</code>
<code>  clearListButton.disabled = <span style="color: #BFEBBF;">false</span>;</code>
<code>});</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1a17a14" class="outline-4">
<h4 id="org1a17a14"><span class="section-number-4">37.18.8</span> Exercise: Disable the button when the page is loaded</h4>
<div class="outline-text-4" id="text-37-18-8">
<ul class="org-ul">
<li>Disable the button when <code>DOMContentLoaded</code> fires</li>
</ul>
</div>
</div>

<div id="outline-container-org36a99da" class="outline-4">
<h4 id="org36a99da"><span class="section-number-4">37.18.9</span> Solution: Disable the button when the page is loaded</h4>
<div class="outline-text-4" id="text-37-18-9">
<div class="org-src-container">
<pre class="src src-javascript"><code>  });</code>
<code></code>
<code>  inputBox.focus();</code>
<code>  addItemButton.disabled = <span style="color: #BFEBBF;">true</span>;</code>
<code>  clearListButton.disabled = <span style="color: #BFEBBF;">true</span>;</code>
<code>});</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org41b0bb8" class="outline-4">
<h4 id="org41b0bb8"><span class="section-number-4">37.18.10</span> Conditionally disable the button when clicking delete item</h4>
<div class="outline-text-4" id="text-37-18-10">
<ul class="org-ul">
<li>Deleting an item might need to disable the button
<ul class="org-ul">
<li>If there are still items in the list then leave it enabled</li>
<li>Otherwise, delete it</li>
</ul></li>
<li>Find the <code>deleteButton</code> click handler code</li>
<li>Modify it to disable the button if there are no <code>li</code> elements</li>
</ul>
</div>
</div>

<div id="outline-container-org8e9e4e2" class="outline-4">
<h4 id="org8e9e4e2"><span class="section-number-4">37.18.11</span> Hint: Conditionally disable the button when clicking delete item</h4>
<div class="outline-text-4" id="text-37-18-11">
<ul class="org-ul">
<li>How do you find all the <code>li</code> elements?</li>
<li>What property can you check to see if any elements were found?</li>
</ul>
</div>
</div>

<div id="outline-container-org84f8c6e" class="outline-4">
<h4 id="org84f8c6e"><span class="section-number-4">37.18.12</span> Big hint</h4>
<div class="outline-text-4" id="text-37-18-12">
<ul class="org-ul">
<li>How do you find all the <code>li</code> elements?</li>
</ul>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">listItems</span> = document.querySelectorAll(<span style="color: #CC9393;">'li'</span>);</code>
</pre>
</div>

<ul class="org-ul">
<li>What property can you check to see if any elements were found?</li>
</ul>

<div class="org-src-container">
<pre class="src src-javascript"><code>listItems.length;</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc6305b4" class="outline-4">
<h4 id="orgc6305b4"><span class="section-number-4">37.18.13</span> Solution: Conditionally disable the button when clicking delete item</h4>
<div class="outline-text-4" id="text-37-18-13">
<div class="org-src-container">
<pre class="src src-javascript"><code>deleteButton.addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  listItem.remove();</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">clearListButton</span> = document.querySelector(<span style="color: #CC9393;">'button#clear'</span>);</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">listItems</span> = document.querySelectorAll(<span style="color: #CC9393;">'li'</span>);</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (listItems.length === 0) {</code>
<code>    clearListButton.disabled = <span style="color: #BFEBBF;">true</span>;</code>
<code>  } <span style="color: #F0DFAF; font-weight: bold;">else</span> {</code>
<code>    clearListButton.disabled = <span style="color: #BFEBBF;">false</span>;</code>
<code>  }</code>
<code>});</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org840d1ff" class="outline-4">
<h4 id="org840d1ff"><span class="section-number-4">37.18.14</span> Refactor: Remove the <code>if</code> statement</h4>
<div class="outline-text-4" id="text-37-18-14">
<div class="org-src-container">
<pre class="src src-javascript"><code>deleteButton.addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>  listItem.remove();</code>
<code></code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">clearListButton</span> = document.querySelector(<span style="color: #CC9393;">'button#clear'</span>);</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">listItems</span> = document.querySelectorAll(<span style="color: #CC9393;">'li'</span>);</code>
<code></code>
<code>  clearListButton.disabled = listItems.length === 0;</code>
<code>});</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb48d834" class="outline-4">
<h4 id="orgb48d834"><span class="section-number-4">37.18.15</span> Refactor: Remove the variables</h4>
<div class="outline-text-4" id="text-37-18-15">
<div class="org-src-container">
<pre class="src src-javascript"><code>deleteButton.addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span> (<span style="color: #DFAF8F;">event</span>) {</code>
<code>  listItem.remove();</code>
<code></code>
<code>  document.querySelector(<span style="color: #CC9393;">'button#clear'</span>).disabled =</code>
<code>      document.querySelectorAll(<span style="color: #CC9393;">'li'</span>).length === 0;</code>
<code>});</code>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org360afc6" class="outline-2">
<h2 id="org360afc6"><span class="section-number-2">38</span> More loops</h2>
<div class="outline-text-2" id="text-38">
</div>
<div id="outline-container-org351e329" class="outline-3">
<h3 id="org351e329"><span class="section-number-3">38.1</span> <code>for</code> loops</h3>
<div class="outline-text-3" id="text-38-1">
<ul class="org-ul">
<li><code>.forEach</code> is a good way to loop over everything</li>
<li>Sometimes you need more control</li>
</ul>
</div>

<div id="outline-container-orgdbeeb87" class="outline-4">
<h4 id="orgdbeeb87"><span class="section-number-4">38.1.1</span> <code>for</code> loop syntax</h4>
<div class="outline-text-4" id="text-38-1-1">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">for</span> (initial; condition; last) {</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Loop body</span></code>
<code>}</code>
</pre>
</div>

<ul class="org-ul">
<li><code>initial</code> - code executed before the loop starts</li>
<li><code>condition</code> - expression evaluated before each loop
<ul class="org-ul">
<li>If true then the loop body runs</li>
</ul></li>
<li><code>last</code> - code executed at the end of each loop</li>
<li>All three separated by <code>;</code></li>
</ul>
</div>
</div>

<div id="outline-container-org060508f" class="outline-4">
<h4 id="org060508f"><span class="section-number-4">38.1.2</span> <code>for</code> loop example</h4>
<div class="outline-text-4" id="text-38-1-2">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">for</span> (<span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">i</span> = 0; i &lt; 9; i = i + 1) {</code>
<code>  console.log(i);</code>
<code>}</code>
</pre>
</div>

<ol class="org-ol">
<li>Create a variable called <code>i</code>, set to <code>0</code>.</li>
<li>Is <code>i</code> &lt; <code>9</code>? If so, run the loop body, else exit</li>
<li>Add <code>1</code> to <code>i</code>.</li>
<li>Go to step 2.</li>
</ol>

<div class="NOTES">
<p>
Creates a variable called <code>i</code>
</p>

<p>
Checks to see if i &lt; 9. It is, so it runs the body of the loop.
</p>

<p>
Then adds one to i.
</p>

<p>
The <code>i</code> variable's visibility, or scope, is limited to the body  of the <code>for</code> loop.
</p>

</div>
</div>
</div>

<div id="outline-container-orgbfe2d91" class="outline-4">
<h4 id="orgbfe2d91"><span class="section-number-4">38.1.3</span> <code>i++</code> syntax</h4>
<div class="outline-text-4" id="text-38-1-3">
<div class="org-src-container">
<pre class="src src-javascript"><code>i = i + 1;</code>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-javascript"><code>i++;</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org331e997" class="outline-4">
<h4 id="org331e997"><span class="section-number-4">38.1.4</span> <code>for</code> loop example</h4>
<div class="outline-text-4" id="text-38-1-4">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">a</span> = [1, 2, 3, 4, 5, 6, 7, 8];</code>
<code></code>
<code><span style="color: #F0DFAF; font-weight: bold;">for</span> (<span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">i</span> = 0; i &lt; a.length; i = i + 1) {</code>
<code>  console.log(a[i]);</code>
<code>}</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4176e32" class="outline-4">
<h4 id="org4176e32"><span class="section-number-4">38.1.5</span> What if you wanted to process every second element?</h4>
<div class="outline-text-4" id="text-38-1-5">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">a</span> = [1, 2, 3, 4, 5, 6, 7, 8];</code>
<code></code>
<code><span style="color: #F0DFAF; font-weight: bold;">for</span> (<span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">i</span> = 1; i &lt; a.length; i = i + 2) {</code>
<code>  console.log(a[i]);</code>
<code>}</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8086ab0" class="outline-4">
<h4 id="org8086ab0"><span class="section-number-4">38.1.6</span> <code>for</code> loop for deleting elements</h4>
<div class="outline-text-4" id="text-38-1-6">
<div class="org-src-container">
<pre class="src src-javascript"><code>clearListButton.addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span> (<span style="color: #DFAF8F;">event</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">listItems</span> = document.querySelectorAll(<span style="color: #CC9393;">'li'</span>);</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">for</span> (<span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">i</span> = 0; i &lt; listitems.length; i++) {</code>
<code>    listItems.item(i).remove();</code>
<code>  });</code>
<code>  clearListButton.disabled = <span style="color: #BFEBBF;">true</span>;</code>
<code>});</code>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org23f2cad" class="outline-3">
<h3 id="org23f2cad"><span class="section-number-3">38.2</span> <code>while</code> loops</h3>
<div class="outline-text-3" id="text-38-2">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">while</span> (expression) {</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Loop body</span></code>
<code>}</code>
</pre>
</div>

<ul class="org-ul">
<li>Executes the loop body while the expression is true</li>
<li>Might not execute the expression at all</li>
</ul>
</div>

<div id="outline-container-org6ea9b89" class="outline-4">
<h4 id="org6ea9b89"><span class="section-number-4">38.2.1</span> <code>while</code> loop example</h4>
<div class="outline-text-4" id="text-38-2-1">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">i</span> = 0;</code>
<code><span style="color: #F0DFAF; font-weight: bold;">while</span> (i &lt; 9) {</code>
<code>  console.log(i);</code>
<code>  i++;</code>
<code>}</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org448eeaa" class="outline-4">
<h4 id="org448eeaa"><span class="section-number-4">38.2.2</span> <code>while</code> loop to delete elements</h4>
<div class="outline-text-4" id="text-38-2-2">
<div class="org-src-container">
<pre class="src src-javascript"><code>clearListButton.addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span> (<span style="color: #DFAF8F;">event</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">listItems</span> = document.querySelectorAll(<span style="color: #CC9393;">'li'</span>);</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">i</span> = 0;</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">while</span> (i &lt; listItems.length) {</code>
<code>    listItems.item(i).remove();</code>
<code>    i++;</code>
<code>  }</code>
<code>  clearListButton.disabled = <span style="color: #BFEBBF;">true</span>;</code>
<code>});</code>
</pre>
</div>

<div class="NOTES">
<p>
Here's how we could delete elements with a <code>for</code> loop, just as
a reminder.
</p>

</div>
</div>
</div>

<div id="outline-container-orgae67a93" class="outline-4">
<h4 id="orgae67a93"><span class="section-number-4">38.2.3</span> <code>firstChild</code> property</h4>
<div class="outline-text-4" id="text-38-2-3">
<ul class="org-ul">
<li>Elements have a <code>firstChild</code> property</li>
</ul>

<blockquote>
<p>
The <code>.firstChild</code> property returns the node's first child in
the tree, or <code>null</code> if the node has no children.
</p>
</blockquote>

<ul class="org-ul">
<li><code>null</code> is a false value.</li>
</ul>
</div>
</div>

<div id="outline-container-org8036457" class="outline-4">
<h4 id="org8036457"><span class="section-number-4">38.2.4</span> <code>while</code> loop to delete elements</h4>
<div class="outline-text-4" id="text-38-2-4">
<div class="org-src-container">
<pre class="src src-javascript"><code>clearListButton.addEventListener(<span style="color: #CC9393;">'click'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span> (<span style="color: #DFAF8F;">event</span>) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">ul</span> = document.querySelector(<span style="color: #CC9393;">'ul'</span>);</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">while</span> (ul.firstChild) {</code>
<code>    ul.firstChild.remove();</code>
<code>  }</code>
<code>});</code>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org692b09d" class="outline-3">
<h3 id="org692b09d"><span class="section-number-3">38.3</span> Leaving loops earlier than normal</h3>
<div class="outline-text-3" id="text-38-3">
<ul class="org-ul">
<li>Use <code>break</code> to exit a loop sooner than normal</li>
</ul>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">a</span> = [1, 2, 3, 4, <span style="color: #CC9393;">'stop'</span>, 5, 6, 7];</code>
<code></code>
<code><span style="color: #F0DFAF; font-weight: bold;">for</span> (<span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">i</span> = 0; i &lt; a.length; i++) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (a[i] === <span style="color: #CC9393;">'stop'</span>) {</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">break</span>;</code>
<code>  }</code>
<code>  console.log(a[i]);</code>
<code>}</code>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">a</span> = [1, 2, 3, 4, <span style="color: #CC9393;">'stop'</span>, 5, 6, 7];</code>
<code></code>
<code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">i</span> = 0;</code>
<code><span style="color: #F0DFAF; font-weight: bold;">while</span> (i &lt; a.length) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (a[i] === <span style="color: #CC9393;">'stop'</span>) {</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">break</span>;</code>
<code>  }</code>
<code>  console.log(a[i])</code>
<code>}</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6e5d77c" class="outline-3">
<h3 id="org6e5d77c"><span class="section-number-3">38.4</span> Restarting loops earlier than normal</h3>
<div class="outline-text-3" id="text-38-4">
<ul class="org-ul">
<li>Use <code>continue</code> to restart a loop sooner than normal</li>
</ul>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">a</span> = [1, 2, 3, 4, <span style="color: #CC9393;">'ignore'</span>, 5, 6, 7];</code>
<code></code>
<code><span style="color: #F0DFAF; font-weight: bold;">for</span> (<span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">i</span> = 0; i &lt; a.length; i++) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (a[i] === <span style="color: #CC9393;">'ignore'</span>) {</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">continue</span>;</code>
<code>  }</code>
<code>  console.log(a[i]);</code>
<code>}</code>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">a</span> = [1, 2, 3, 4, <span style="color: #CC9393;">'ignore'</span>, 5, 6, 7];</code>
<code></code>
<code><span style="color: #F0DFAF; font-weight: bold;">let</span> <span style="color: #DFAF8F;">i</span> = 0;</code>
<code><span style="color: #F0DFAF; font-weight: bold;">while</span> (i &lt; a.length) {</code>
<code>  <span style="color: #F0DFAF; font-weight: bold;">if</span> (a[i] === <span style="color: #CC9393;">'ignore'</span>) {</code>
<code>    <span style="color: #F0DFAF; font-weight: bold;">continue</span>;</code>
<code>  }</code>
<code>  console.log(a[i])</code>
<code>}</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb2e1c9d" class="outline-3">
<h3 id="orgb2e1c9d"><span class="section-number-3">38.5</span> When to use each loop type</h3>
<div class="outline-text-3" id="text-38-5">
<ul class="org-ul">
<li><code>forEach</code>, you need to process everything
<ul class="org-ul">
<li>You won't need to stop part way through the loop</li>
</ul></li>
<li><code>for</code>, knowing the loop index is important
<ul class="org-ul">
<li>You won't need the index variable elsewhere</li>
</ul></li>
<li><code>while</code>, everything else</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org70d03fe" class="outline-2">
<h2 id="org70d03fe"><span class="section-number-2">39</span> Speed, and <code>document.readyState</code></h2>
<div class="outline-text-2" id="text-39">
<ul class="org-ul">
<li>Websites need to be fast
<ul class="org-ul">
<li>Fast to load</li>
<li>Fast to interact with</li>
</ul></li>
<li>We notice latency (delays) of 1/10th of a second
<ul class="org-ul">
<li>1/10th is 100ms (milliseconds)</li>
</ul></li>
<li>Each new file loaded takes time
<ul class="org-ul">
<li>Overhead even if the file is small</li>
</ul></li>
</ul>

<div class="NOTES">
<p>
We want websites to be fast.
</p>

<p>
Roughly, this means two things.
</p>

<p>
First, the site should be fast to load - the time between you pressing
RETURN on the URL or clicking a link, and the site loading, should be
as small as possible – the user should see something very quickly.
</p>

<p>
Second, it should be possible to interact with the site quickly. If the user
has to wait around for the Javascript to load, or images to appear, or things
like that then they will get frustrated with your site. Or worse, they'll get
bored and go and do something else.
</p>

<p>
When we talk about delays we typically talk about it as <b>latency</b>. This is
(roughly) a fancy word for how long something takes to start. If you've
ever had a phone call or video chat with someone thousands of miles away
then you've experienced this – you think they've stopped talking, so you
start talking, but there's a half second delay, they've started talking
again, and you end up talking over them.
</p>

<p>
Humans can easily notice latency of a 10th of a second or more.
</p>

<p>
We normally measure latency in thousanths of a second, or milliseconds.
</p>

<p>
Every time we need to load a new file as part of our site there's some
overhead involved in loading that file, even if the file is small. We want
to do things to minimise that as much as possible.
</p>

</div>
</div>

<div id="outline-container-org4cb6f02" class="outline-3">
<h3 id="org4cb6f02"><span class="section-number-3">39.1</span> How long is our page taking to load?</h3>
<div class="outline-text-3" id="text-39-1">
<div class="org-center">
<p>
[Network tab for shopping-15.html]
</p>
</div>

<div class="NOTES">
<ul class="org-ul">
<li>Demo the Network tab</li>
<li>Show how long the HTML takes to load</li>
<li>Show how long it takes until DOMContentLoaded fires
<ul class="org-ul">
<li>Should be roughly 80ms.</li>
</ul></li>
<li>Big delay that we can reduce</li>
</ul>

</div>
</div>
</div>

<div id="outline-container-org5b5bdae" class="outline-3">
<h3 id="org5b5bdae"><span class="section-number-3">39.2</span> Loading timeline</h3>
<div class="outline-text-3" id="text-39-2">

<div class="figure">
<p><object type="image/svg+xml" data="./JavaScript_files/timeline1.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
</div>
</div>

<div id="outline-container-orga8b8605" class="outline-3">
<h3 id="orga8b8605"><span class="section-number-3">39.3</span> Loading Javascript asynchronously</h3>
<div class="outline-text-3" id="text-39-3">
<ul class="org-ul">
<li><code>&lt;script ... async&gt;</code></li>
</ul>

<div class="NOTES">
<p>
We can tell the browser that we want the Javascript to be loaded in the
background, at the same time as the rest of the HTML is being processed.
</p>

<p>
We say that the the Javascript is being handled <b>asynchronously</b>.
</p>

<p>
To do that, we add the <code>async</code> attribute to the <code>script</code> element in the
HTML.
</p>

<p>
[Demo this, with the inspector, show the difference in <code>DOMContentLoaded</code>
time]
</p>

</div>
</div>
</div>

<div id="outline-container-org7309eb6" class="outline-3">
<h3 id="org7309eb6"><span class="section-number-3">39.4</span> Loading timeline now</h3>
<div class="outline-text-3" id="text-39-4">

<div class="figure">
<p><object type="image/svg+xml" data="./JavaScript_files/timeline2.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>

<div class="NOTES">
<p>
So now the operations that are happening look more like this.
</p>

<p>
But there's a problem here – the <code>DOMContentLoaded</code> event might fire before
we've had a chance to listen to it.
</p>

<p>
The event only fires once, if we're not listening for it when it fires we
have a problem.
</p>

<p>
[Demo the problem in the page – none of the UI should work]
</p>

</div>
</div>
</div>

<div id="outline-container-org5d18607" class="outline-3">
<h3 id="org5d18607"><span class="section-number-3">39.5</span> Race Conditions</h3>
<div class="outline-text-3" id="text-39-5">
<ul class="org-ul">
<li>This is called a <b>Race Condition</b></li>
<li>Two things are <b>racing</b> to finish</li>
<li>Depending on which one wins changes the result</li>
</ul>

<div class="NOTES">
<p>
We call this a <b>race condition</b>.
</p>

<p>
We have two things that need to finish – loading the HTML, and running the
Javascript.
</p>

<p>
They are <b>racing</b> to finish.
</p>

<p>
Sometimes loading the HTML will finish first – it wins the race. If that
happens then the <code>DOMContentLoaded</code> event will fire before the Javascript
runs, and we see this problem.
</p>

<p>
Other times the Javascript might win the race, and run first. If that happens
then everything appears to be fine.
</p>

<p>
Race conditions can be difficult to track down, because the problem might
not occur all the time. So you need to have a good mental model of what the
code is doing at all times in order to be able to predict things like this.
</p>

</div>
</div>
</div>

<div id="outline-container-orgb1039db" class="outline-3">
<h3 id="orgb1039db"><span class="section-number-3">39.6</span> Fixing the race with <code>document.readyState</code></h3>
<div class="outline-text-3" id="text-39-6">
<ul class="org-ul">
<li><code>document.readyState</code> property (string)</li>
<li>Describes the <b>loading</b> state of the page</li>
<li>3 possible values
<ul class="org-ul">
<li><code>loading</code></li>
<li><code>interactive</code></li>
<li><code>complete</code></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org3036507" class="outline-3">
<h3 id="org3036507"><span class="section-number-3">39.7</span> Using <code>document.readyState</code></h3>
<div class="outline-text-3" id="text-39-7">
<div class="org-src-container">
<pre class="src src-javascript"><code><span style="color: #9FC59F;">/**</span></code>
<code><span style="color: #9FC59F;"> * Set up event listeners and configure initial element state when the</span></code>
<code><span style="color: #9FC59F;"> * DOM is ready.</span></code>
<code><span style="color: #9FC59F;"> */</span></code>
<code><span style="color: #F0DFAF; font-weight: bold;">function</span> <span style="color: #93E0E3;">domContentLoaded</span>() {</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">Code that needs to interact with the DOM</span></code>
<code>}</code>
<code></code>
<code><span style="color: #F0DFAF; font-weight: bold;">if</span> (document.readyState === <span style="color: #CC9393;">'loading'</span>) {</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">DOMContentLoaded has not fired yet.</span></code>
<code>  document.addEventListener(<span style="color: #CC9393;">'DOMContentLoaded'</span>, <span style="color: #F0DFAF; font-weight: bold;">function</span>(<span style="color: #DFAF8F;">event</span>) {</code>
<code>    domContentLoaded();</code>
<code>  });</code>
<code>} <span style="color: #F0DFAF; font-weight: bold;">else</span> {</code>
<code>  <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">DOMContendLoaded has fired.</span></code>
<code>  domContentLoaded();</code>
<code>}</code>
</pre>
</div>

<div class="NOTES">
<p>
In general terms, this is how we can use <code>document.readyState</code>.
</p>

<p>
We have to put our set up code in to a function, instead of being an
anonymous function here. This is because we need to call it from two places.
</p>

<p>
It's still only going to be called once, but we can't predict when it's
going to be called.
</p>

<p>
This is the new <code>domContentLoaded</code> function.
</p>

<p>
Then we use an <code>if</code> statement to decide how to call our function.
</p>

<p>
If the document is still loading then we know that <code>DOMContentLoaded</code> hasn't
fired yet, and we should use an event handler.
</p>

<p>
But if the <code>readyState</code> is not <code>loading</code> then we know that the DOM is ready
and we can run our code directly.
</p>

<p>
Go and make this change to your code, and verify that everything works as
you expect.
</p>

</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Nik Clayton</p>
<p class="date">Created: 2019-01-28 Mon 18:12</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>


</body><span class="gr__tooltip"><span class="gr__tooltip-content"></span><i class="gr__tooltip-logo"></i><span class="gr__triangle"></span></span></html>